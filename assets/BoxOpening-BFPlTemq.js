import{i as Ie,g as ge,f as Pe,j as e,s as G,D as ze,B as r,T as a,a as y,d as E,u as M,b as N,m as V,c as Re,I as Le,e as Te,C as Y,r as We,h as Fe,k as Ae,n as De,l as Ee,w as ae,S as Ue,t as me,H as Be,o as ne,p as $e,q as se,v as Oe,x as Ge,y as _e,z as Z,G as z,A as le,P as Me,E as Ne,M as de,F as Ve,J as Ye,K as He,L as Ke,N as qe,O as Qe,Q as Xe,R as Ze,U as Je,V as er,W as rr,X as tr,Y as or,Z as ir,_ as ar,$ as nr,a0 as sr,a1 as lr,a2 as dr,a3 as cr,a4 as xr,a5 as gr,a6 as mr,a7 as ur,a8 as pr,a9 as hr}from"./index-70xGuvPm.js";import{r as l,u as fr,e as br,c as yr}from"./vendor-Btj0IEn_.js";import{B as jr,R as wr,d as J,g as vr}from"./firebase-5tZFCi70.js";const Cr=Ie(Pe),Sr=ge(Cr),kr=({debug:u,blockId:j})=>{const i=l.useRef(null),[c,w]=l.useState(!1),[S,g]=l.useState(!1),v=async()=>{try{g(!0);const h=localStorage.getItem("telegramUserId");if(!h)throw new Error("User ID not found");const f=E(Sr,"users",h);await M(f,{keyParts:N(5)}),w(!1)}catch(h){console.error("Error claiming reward:",h)}finally{g(!1)}};return l.useEffect(()=>{const h=U=>{w(!0)},f=i.current;return f&&f.addEventListener("reward",h),()=>{f&&f.removeEventListener("reward",h)}},[]),customElements.get("adsgram-task")?e.jsx(e.Fragment,{children:e.jsxs(e.Fragment,{children:[e.jsxs("adsgram-task",{className:G.task,"data-block-id":j,"data-debug":u,ref:i,children:[e.jsx("span",{slot:"reward",className:G.reward,children:"Get free key parts"}),e.jsx("div",{slot:"button",className:G.button,children:"Go"}),e.jsx("div",{slot:"done",className:G.button_done,children:"Done"})]}),e.jsx(ze,{anchor:"bottom",open:c,onClose:()=>w(!1),PaperProps:{sx:{backgroundColor:"#1A2126",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",border:"1px solid rgba(110, 211, 255, 0.1)"}},children:e.jsxs(r,{sx:{p:3,textAlign:"center"},children:[e.jsx(a,{variant:"h6",sx:{color:"#fff",fontWeight:600,mb:1},children:"You've earned 5 key parts for completing this task !"}),e.jsx(a,{sx:{color:"rgba(255,255,255,0.7)",mb:3},children:"Now you can craft with 5 key parts !"}),e.jsx(y,{variant:"contained",onClick:v,disabled:S,sx:{backgroundColor:"rgba(110, 211, 255, 0.1)",color:"#6ed3ff","&:hover":{backgroundColor:"rgba(110, 211, 255, 0.2)"},minWidth:120},children:S?"Claiming...":"Claim Reward"})]})})]})}):null},b={primaryColor:"#6ed3ff",primaryGradient:"linear-gradient(90deg, #6ed3ff, #8ee9ff)",bgGradient:"linear-gradient(135deg, rgba(110, 211, 255, 0.3) 0%, rgba(110, 211, 255, 0.1) 100%)",borderColor:"rgba(110, 211, 255, 0.2)",hoverBorderColor:"rgba(110, 211, 255, 0.4)",buttonShadow:"0 4px 12px rgba(110, 211, 255, 0.3)",buttonHoverShadow:"0 6px 16px rgba(110, 211, 255, 0.4)"},Ir=({keyParts:u,onCraftKey:j,isLoading:i})=>{const c=u>=5,w=u/5*100;return e.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(r,{sx:{mt:4,p:3,background:b.bgGradient,borderRadius:"15px",border:`1px solid ${b.borderColor}`,position:"relative",overflow:"hidden",transition:"all 0.3s ease","&:hover":{border:`1px solid ${b.hoverBorderColor}`,boxShadow:b.buttonHoverShadow}},children:[e.jsx(r,{sx:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:`radial-gradient(circle, ${b.primaryColor}15 0%, ${b.primaryColor}00 70%)`,pointerEvents:"none",opacity:c?1:0,transition:"opacity 0.3s ease"}}),e.jsxs(r,{sx:{position:"relative",zIndex:1},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(r,{sx:{width:"48px",height:"48px",borderRadius:"12px",background:b.primaryGradient,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:b.buttonShadow},children:e.jsx(Re,{sx:{color:"white",fontSize:"1.8rem"}})}),e.jsxs(r,{children:[e.jsx(a,{variant:"h6",sx:{color:"white",fontWeight:"bold",lineHeight:1.2},children:"Key Crafting"}),e.jsx(a,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.9rem"},children:"Collect 5 parts to craft a key"})]})]}),e.jsx(Le,{sx:{color:"rgba(255,255,255,0.7)","&:hover":{color:b.primaryColor}},children:e.jsx(Te,{})})]}),e.jsxs(r,{sx:{mb:3},children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(a,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.9rem"},children:"Progress"}),e.jsxs(a,{sx:{color:c?b.primaryColor:"rgba(255,255,255,0.7)",fontWeight:"bold",fontSize:"0.9rem"},children:[u,"/5 parts"]})]}),e.jsx(r,{sx:{width:"100%",height:"8px",background:"rgba(255,255,255,0.1)",borderRadius:"4px",overflow:"hidden"},children:e.jsx(V.div,{initial:{width:0},animate:{width:`${w}%`},transition:{duration:.5},style:{height:"100%",background:c?b.primaryGradient:"linear-gradient(90deg, rgba(255,255,255,0.2), rgba(255,255,255,0.3))",borderRadius:"4px"}})})]}),e.jsxs(r,{sx:{mt:3,display:"flex",flexDirection:"column",gap:2},children:[e.jsx(y,{variant:"contained",onClick:j,disabled:!c||i,fullWidth:!0,sx:{py:1.5,background:c?b.primaryGradient:"rgba(255,255,255,0.1)",color:c?"black":"rgba(255,255,255,0.5)",fontWeight:"bold",fontSize:"0.95rem",borderRadius:"8px",textTransform:"none",position:"relative",boxShadow:c?b.buttonShadow:"none","&:hover":{background:c?"linear-gradient(90deg, #8ee9ff, #6ed3ff)":"rgba(255,255,255,0.1)",boxShadow:c?b.buttonHoverShadow:"none"},"&:disabled":{background:"rgba(255,255,255,0.1)",color:"rgba(255,255,255,0.3)"}},children:i?e.jsx(Y,{size:24,sx:{color:c?"black":"rgba(255,255,255,0.5)"}}):e.jsx(e.Fragment,{children:c?"Craft Key":"Insufficient Parts"})}),!c&&e.jsx(kr,{blockId:"task-8200",debug:!1})]})]})]})})};var re={},Pr=Fe;Object.defineProperty(re,"__esModule",{value:!0});var ue=re.default=void 0,zr=Pr(We()),Rr=e;ue=re.default=(0,zr.default)((0,Rr.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");const Lr=ge(Ee),Tr=Ae`
  0% {
    transform: rotate(0deg);
  }
  50% {
    transform: rotate(180deg);
  }
  100% {
    transform: rotate(360deg);
  }
`,Wr=De(r)`
  animation: ${Tr} 2s steps(2) infinite;
  display: flex;
  align-items: center;
  justify-content: center;
`,ce="https://www.effectiveratecpm.com/rfzqpxh9b5?key=363850befc2ce02b0f1173157255afe8",C=2,R="levelUpgradeViewCount",_="lastLevelUpgradeClaim",ee=60*1e3,Fr=({onAdComplete:u,disabled:j})=>{const[i,c]=l.useState(!1),[w,S]=l.useState(null),[g,v]=l.useState(0),[h,f]=l.useState(null);l.useEffect(()=>{const x=localStorage.getItem(_);if(x){const m=parseInt(x),T=Date.now()-m;T<ee?(f(ee-T),localStorage.removeItem(R),v(0)):(localStorage.removeItem(_),localStorage.removeItem(R),v(0),f(null))}else{const m=localStorage.getItem(R);m&&v(parseInt(m))}},[]),l.useEffect(()=>{if(h===null)return;const x=setInterval(()=>{f(m=>m===null||m<=1e3?(clearInterval(x),localStorage.removeItem(_),localStorage.removeItem(R),v(0),null):m-1e3)},1e3);return()=>clearInterval(x)},[h]);const U=l.useCallback(()=>{var x;c(!0),S(null);try{(x=window.Telegram)!=null&&x.WebApp?window.Telegram.WebApp.openLink(ce):window.open(ce,"_blank");const m=g+1;v(m),localStorage.setItem(R,m.toString()),m>=C&&u&&u()}catch{S("Failed to load advertisement. Please try again.")}finally{c(!1)}},[u,g]),B=async()=>{try{c(!0);const x=localStorage.getItem("telegramUserId");if(!x)throw new Error("User ID not found");const m=E(Lr,"users",x);await M(m,{tickets:N(1)}),localStorage.removeItem(R),v(0);const L=Date.now();localStorage.setItem(_,L.toString()),f(ee),u&&u()}catch{S("Failed to claim reward. Please try again.")}finally{c(!1)}},$=x=>`${Math.ceil(x/1e3)}s`;return e.jsxs(r,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:[e.jsx(y,{fullWidth:!0,variant:"contained",onClick:g>=C?B:U,disabled:j||i||h!==null,startIcon:g>=C?null:e.jsx("img",{src:ae,alt:"",width:32}),sx:{backgroundColor:g>=C?"rgba(76, 175, 80, 0.1)":"rgba(110, 211, 255, 0.1)",color:g>=C?"#4caf50":"#6ed3ff",border:g>=C?"1px solid rgba(76, 175, 80, 0.5)":"1px solid rgba(110, 211, 255, 0.2)","&:hover":{backgroundColor:g>=C?"rgba(76, 175, 80, 0.2)":"rgba(110, 211, 255, 0.2)",border:g>=C?"1px solid rgba(76, 175, 80, 0.7)":"1px solid rgba(110, 211, 255, 0.3)"},"&:disabled":{backgroundColor:"rgba(255, 255, 255, 0.05)",color:"rgba(255, 255, 255, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)",opacity:.7,cursor:"not-allowed"},borderRadius:2,display:"flex",alignItems:"center",gap:1,textTransform:"none",fontSize:"0.95rem",fontWeight:600,transition:"all 0.2s ease"},children:i?e.jsx(Y,{size:24,sx:{color:"inherit"}}):h!==null?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:ae,alt:"",width:32}),"Earn Free Ticket"]}):j?e.jsxs(e.Fragment,{children:[e.jsx(Ue,{size:18,strokeWidth:1.5}),"Use Upgrade Ticket"]}):g>=C?e.jsxs(e.Fragment,{children:[e.jsx(r,{component:"img",src:me,sx:{width:20,height:20,mr:1}}),"Claim 1 Ticket"]}):e.jsxs(e.Fragment,{children:["Earn Free Ticket",g>0&&e.jsxs(r,{sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"8px",px:1,py:.5,fontSize:"0.85rem",ml:1,border:"1px solid rgba(255, 255, 255, 0.1)"},children:[g,"/",C]})]})}),h!==null&&e.jsxs(a,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.5)",display:"flex",alignItems:"center",gap:1,fontSize:"0.85rem",mt:-1},children:[e.jsx(Wr,{children:e.jsx(Be,{size:14,color:"rgba(255, 255, 255, 0.5)"})}),`Level Upgrade in ${$(h)}`]}),w&&e.jsx(a,{color:"error",variant:"body2",textAlign:"center",children:w})]})},Ar="/assets/01_ROLEX_DAYTONA-Box-mock_box_tgFf3C6-CYGAuzWj.png",xe=[{id:"mystery-gift",image:Ye,title:"Mystery Gift Box",normalPrice:"FREE",salePrice:"FREE",description:"Get free boxes for every deposits",brand:"Special"},{id:"alienware",image:He,title:"ALIENWARE",normalPrice:"16.89",salePrice:"14.49",description:"Gaming gear from Alienware",brand:"Tech"},{id:"amazon",image:Ke,title:"Amazon",normalPrice:"10.49",salePrice:"8.89",description:"Amazon mystery box with various items",brand:"Retail"},{id:"landrover",image:qe,title:"Land Rover",normalPrice:"199.99",salePrice:"169.99",description:"Luxury SUV themed box with exclusive Land Rover items",brand:"Automotive"},{id:"rolex-submariner",image:Qe,title:"Submariner",normalPrice:"89.99",salePrice:"85.45",description:"Luxury diving watch themed box",brand:"Luxury"},{id:"donald-trump",image:Xe,title:"Donald Trump",normalPrice:"6.99",salePrice:"5.45",description:"Political memorabilia box",brand:"Politics"},{id:"rolex-yachtmaster",image:Ze,title:"Yachtmaster",normalPrice:"199.99",salePrice:"149.99",description:"Luxury yacht watch themed box",brand:"Luxury"},{id:"rolex",image:Je,title:"Rolex Collection",normalPrice:"299.99",salePrice:"249.99",description:"Premium Rolex collection box",brand:"Luxury"},{id:"chanel",image:er,title:"Chanel",normalPrice:"199.99",salePrice:"169.99",description:"Luxury fashion box featuring Chanel items",brand:"Luxury"},{id:"louis-vuitton",image:rr,title:"Louis Vuitton",normalPrice:"99.99",salePrice:"95.45",description:"Premium Louis Vuitton fashion items",brand:"Luxury"},{id:"bmw",image:tr,title:"BMW Box",normalPrice:"189.99",salePrice:"159.99",description:"BMW themed luxury automotive box",brand:"Automotive"},{id:"prime",image:or,title:"Prime Box",normalPrice:"39.99",salePrice:"34.99",description:"Premium selection mystery box",brand:"Various"},{id:"sneakers",image:ir,title:"Sneakers Box",normalPrice:"29.99",salePrice:"19.99",description:"Premium sneaker collection box",brand:"Fashion"},{id:"rolex-daytona",image:Ar,title:"Rolex Daytona",normalPrice:"299.99",salePrice:"249.99",description:"Luxury racing watch themed box",brand:"Luxury"},{id:"corsair",image:ar,title:"Corsair Gaming",normalPrice:"49.99",salePrice:"45.99",description:"Premium gaming gear box",brand:"Tech"},{id:"versace",image:nr,title:"Versace",normalPrice:"149.99",salePrice:"119.99",description:"Luxury Italian fashion box",brand:"Luxury"},{id:"football-frenzy",image:sr,title:"Football Frenzy",normalPrice:"9.99",salePrice:"7.45",description:"Football themed mystery box",brand:"Sports"},{id:"maserati",image:lr,title:"Maserati",normalPrice:"299.99",salePrice:"249.99",description:"Italian luxury automotive box",brand:"Automotive"},{id:"topg",image:dr,title:"Top G",normalPrice:"49.99",salePrice:"45.50",description:"Premium lifestyle box",brand:"Lifestyle"},{id:"porsche",image:cr,title:"Porsche",normalPrice:"149.99",salePrice:"125.45",description:"Sports car themed luxury box",brand:"Automotive"},{id:"ferrari",image:xr,title:"Ferrari",normalPrice:"199.99",salePrice:"149.99",description:"Italian supercar themed box",brand:"Automotive"},{id:"old-money",image:gr,title:"Old Money",normalPrice:"29.99",salePrice:"24.99",description:"Classic luxury lifestyle box",brand:"Lifestyle"},{id:"cartier",image:mr,title:"Cartier",normalPrice:"199.99",salePrice:"149.99",description:"Luxury jewelry themed box",brand:"Luxury"},{id:"diamond-vault",image:ur,title:"Diamond Vault",normalPrice:"199.99",salePrice:"159.99",description:"Premium diamond jewelry box",brand:"Luxury"},{id:"hublot",image:pr,title:"Hublot",normalPrice:"99.99",salePrice:"89.99",description:"Luxury Swiss watch themed box",brand:"Luxury"}],s={primaryColor:"#6ed3ff",primaryGradient:"linear-gradient(90deg, #6ed3ff, #8ee9ff)",bgGradient:"linear-gradient(135deg, rgba(110, 211, 255, 0.3) 0%, rgba(110, 211, 255, 0.1) 100%)",borderColor:"rgba(110, 211, 255, 0.2)",hoverBorderColor:"rgba(110, 211, 255, 0.4)",buttonShadow:"0 4px 12px rgba(110, 211, 255, 0.3)",buttonHoverShadow:"0 6px 16px rgba(110, 211, 255, 0.4)"},Br=()=>{const u=fr(),j=br(),[i,c]=l.useState(null),[w,S]=l.useState(!1),[g,v]=l.useState(null),[h,f]=l.useState(!1),[U,B]=l.useState(!1),[$,x]=l.useState(null),[m,L]=l.useState(!0),[T,pe]=l.useState(""),[O,te]=l.useState("asc"),[k,H]=l.useState("boxes"),[W,he]=l.useState("price"),[fe,F]=l.useState(!1),[,be]=l.useState(null),[K,A]=l.useState(!1),[oe,D]=l.useState(""),[ye,q]=l.useState(!1),[je,ie]=l.useState(!1),Q=yr.useCallback(o=>{var n;if(!i)return 0;if(o.id==="mystery-gift")return i.giftBox||0;const t=ne[o.id];return t?((n=i.boxes)==null?void 0:n[t.title])||0:(console.log("Box not found:",o.id),0)},[i]);l.useEffect(()=>{var o;(o=j.state)!=null&&o.defaultTab&&(H(j.state.defaultTab),u(j.pathname,{replace:!0}))},[j.state]),l.useEffect(()=>{const o=localStorage.getItem("telegramUserId");if(!o){u("/spin");return}const t=$e(E(J,"users",o),n=>{if(n.exists()){const d=n.data();c(d),console.log("Firebase Boxes:",d.boxes),console.log("Game Cards:",xe.map(I=>I.title))}else x("Kullanıcı verisi bulunamadı");L(!1)},n=>{console.error("Error fetching user stats:",n),x("Veriler yüklenirken hata oluştu"),L(!1)});return()=>t()},[u]);const X=o=>{u(`/box/${o}`)},we=()=>{f(!1),v(null)},ve=async()=>{const o=localStorage.getItem("telegramUserId");if(!i||i.keyParts<5){x("Yetersiz anahtar parçası");return}x(null),B(!0);try{const t=E(J,"users",o);await M(t,{keyParts:N(-5),keys:N(1)}),vr.to(document.body,{duration:.2,scale:1.02,yoyo:!0,repeat:1,ease:"power2.inOut"})}catch(t){console.error("Error crafting key:",t),x("Anahtar oluşturulurken bir hata oluştu")}finally{B(!1)}},Ce=()=>{if(!(i!=null&&i.drops)||Object.keys(i.drops).length===0)return e.jsxs(r,{sx:{textAlign:"center",py:3,px:3,background:s.bgGradient,borderRadius:"15px",border:`1px solid ${s.borderColor}`,maxWidth:"600px",margin:"0 auto"},children:[e.jsx(a,{variant:"h5",sx:{color:"white",fontWeight:"bold",mt:-1},children:"No Items Found"}),e.jsx(a,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"1rem",mb:3,maxWidth:"400px",margin:"0 auto"},children:"Start your collection by opening mystery boxes and discover amazing rewards!"}),e.jsx(r,{sx:{display:"flex",justifyContent:"center",flexWrap:"wrap"},children:e.jsx(y,{onClick:()=>H("boxes"),variant:"contained",sx:{background:s.primaryGradient,color:"black",py:1.5,fontSize:"0.95rem",fontWeight:"bold",textTransform:"none",borderRadius:"8px",boxShadow:s.buttonShadow,mt:2},children:"Open Boxes"})})]});let o=Object.entries(i.drops).flatMap(([t,n])=>n.map(d=>{const I=Object.values(ne).find(P=>P.title===t),p=I==null?void 0:I.drops.find(P=>P.code===d.code);return{...d,boxTitle:t,name:(p==null?void 0:p.name)||"Unknown Item",image:(p==null?void 0:p.image)||"",price:(p==null?void 0:p.price)||"0",rarity:(p==null?void 0:p.rarity)||0}}));return o=o.filter(t=>{const n=T.toLowerCase();return t.name.toLowerCase().includes(n)||t.boxTitle.toLowerCase().includes(n)}),o.sort((t,n)=>{switch(W){case"price":return O==="asc"?parseFloat(t.price)-parseFloat(n.price):parseFloat(n.price)-parseFloat(t.price);case"rarity":return O==="asc"?t.rarity-n.rarity:n.rarity-t.rarity;default:return 0}}),e.jsxs(r,{children:[e.jsxs(r,{sx:{mb:3,p:3,borderRadius:"15px",background:"rgba(110, 211, 255, 0.05)",border:`1px solid ${s.borderColor}`},children:[e.jsx(a,{variant:"h6",sx:{color:"white",mb:2},children:"My Collection Summary"}),e.jsxs(z,{container:!0,spacing:2,children:[e.jsx(z,{item:!0,xs:4,children:e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(a,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.9rem"},children:"Total Items"}),e.jsx(a,{sx:{color:s.primaryColor,fontWeight:"bold",fontSize:"1.5rem"},children:o.length})]})}),e.jsx(z,{item:!0,xs:4,children:e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(a,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.9rem"},children:"Total Value"}),e.jsxs(a,{sx:{color:s.primaryColor,fontWeight:"bold",fontSize:"1.5rem"},children:["$",o.reduce((t,n)=>t+parseFloat(n.price)*n.amount,0).toFixed(2)]})]})}),e.jsx(z,{item:!0,xs:4,children:e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(a,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.9rem"},children:"Uniques"}),e.jsx(a,{sx:{color:s.primaryColor,fontWeight:"bold",fontSize:"1.5rem"},children:new Set(o.map(t=>t.boxTitle)).size})]})})]})]}),e.jsxs(r,{sx:{mb:3,display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(r,{sx:{display:"flex",gap:1,flex:2},children:["price","rarity"].map(t=>e.jsx(y,{onClick:()=>he(t),variant:W===t?"contained":"outlined",size:"small",fullWidth:!0,sx:{color:W===t?"white":"rgba(255,255,255,0.7)",borderColor:s.borderColor,backgroundColor:W===t?s.primaryColor:"transparent","&:hover":{backgroundColor:W===t?"#8ee9ff":"rgba(110, 211, 255, 0.1)"},fontSize:"0.8rem",letterSpacing:.1,textTransform:"none",height:"36px"},children:t.charAt(0).toUpperCase()+t.slice(1)},t))}),e.jsx(y,{onClick:()=>te(t=>t==="asc"?"desc":"asc"),variant:"outlined",size:"small",fullWidth:!0,sx:{flex:1,color:"white",borderColor:s.borderColor,fontSize:"0.8rem",letterSpacing:.1,textTransform:"none",height:"36px"},children:O==="asc"?"↑ Ascending":"↓ Descending"})]}),e.jsx(z,{container:!0,spacing:2,children:o.map((t,n)=>e.jsx(z,{item:!0,xs:12,sm:6,md:4,children:e.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:n*.1},children:e.jsxs(le,{sx:{position:"relative",background:"linear-gradient(145deg, rgba(26,27,35,0.9) 0%, rgba(26,27,35,0.95) 100%)",borderRadius:"15px",overflow:"hidden",border:`1px solid ${s.borderColor}`,height:"100%",transition:"transform 0.2s",minHeight:"420px"},children:[e.jsxs(r,{sx:{position:"relative",pt:"75%",background:"linear-gradient(45deg, rgba(108,93,211,0.1) 0%, rgba(108,93,211,0.05) 100%)"},children:[e.jsx(r,{component:"img",src:t.image,alt:t.name,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",mb:1,objectFit:"contain",p:.5}}),e.jsx(r,{sx:{position:"absolute",top:10,right:10,background:"rgba(108,93,211,0.9)",borderRadius:"12px",px:1.5,py:.5},children:e.jsxs(a,{sx:{color:"white",fontSize:"0.8rem",fontWeight:"bold"},children:[(t.rarity*100).toFixed(2),"% Rare"]})})]}),e.jsxs(r,{sx:{p:2},children:[e.jsxs(r,{sx:{mb:2},children:[e.jsx(a,{variant:"h6",sx:{color:"white",fontWeight:"bold",fontSize:"1.1rem",mb:.5},children:t.name}),e.jsxs(a,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.85rem",display:"flex",alignItems:"center",gap:.5},children:["From: ",t.boxTitle]})]}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(108,93,211,0.1)",borderRadius:"12px",p:1.5,mb:2},children:[e.jsxs(r,{children:[e.jsx(a,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.8rem"},children:"Value"}),e.jsxs(a,{sx:{color:s.primaryColor,fontWeight:"bold",fontSize:"1.2rem"},children:["$",t.price]})]}),e.jsxs(r,{sx:{textAlign:"right"},children:[e.jsx(a,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.8rem"},children:"Amount"}),e.jsxs(a,{sx:{color:s.primaryColor,fontWeight:"bold",fontSize:"1.2rem"},children:[t.amount,"x"]})]})]}),e.jsxs(y,{variant:"contained",fullWidth:!0,onClick:d=>{d.stopPropagation(),ke(t)},sx:{background:"linear-gradient(90deg, #6ed3ff, #8ee9ff)",color:"black",py:1.5,fontSize:"0.95rem",fontWeight:"bold",textTransform:"none",borderRadius:"8px",boxShadow:"0 4px 12px rgba(110,211,255,0.3)","&:hover":{background:"linear-gradient(90deg, #8ee9ff, #6ed3ff)",boxShadow:"0 6px 16px rgba(110,211,255,0.4)"}},children:["Sell Item for $",(parseFloat(t.price)*t.amount).toFixed(2)]})]})]})})},`${t.code}-${n}`))})]})},Se=async()=>{A(!0),D("");const o=localStorage.getItem("telegramUserId");if(!o){D("User ID not found"),A(!1);return}try{const t=E(J,"users",o),n=await hr(t);if(!n.exists()){D("User data not found"),A(!1);return}const d=n.data(),I=d.level||0,p=I+1,P=p;if(!d.tickets||d.tickets<P){D(`Not enough tickets. Need ${P} tickets for level ${p}`),A(!1);return}await M(t,{level:p,tickets:d.tickets-P,lastLevelUpgrade:new Date().toISOString(),upgradeTransaction:{amount:P,timestamp:new Date().toISOString(),type:"TICKET_UPGRADE",fromLevel:I,toLevel:p}}),F(!1),q(!0),setTimeout(()=>{q(!1)},2e3)}catch(t){console.error("Error processing level upgrade:",t),D("Failed to process upgrade. Please try again.")}finally{A(!1)}},ke=async o=>{if(!localStorage.getItem("telegramUserId"))return;if(((i==null?void 0:i.level)||0)<200){be(o),F(!0);return}console.log("Selling item:",o)};return m?e.jsx(se,{maxWidth:"lg",children:e.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e.jsx(Y,{})})}):e.jsx(se,{maxWidth:"lg",children:e.jsxs(r,{sx:{mt:-5,pb:25},children:[k!=="craft"&&e.jsx(r,{sx:{mb:4},children:e.jsxs(r,{sx:{display:"flex",gap:2,alignItems:"stretch"},children:[e.jsx(Oe,{fullWidth:!0,variant:"outlined",placeholder:k==="boxes"?"Search boxes...":"Search drops...",value:T,onChange:o=>pe(o.target.value),InputProps:{startAdornment:e.jsx(Ge,{position:"start",children:e.jsx(ue,{sx:{color:"white"}})}),sx:{color:"white",height:"100%","& .MuiOutlinedInput-root":{height:"100%"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.2)"}}},sx:{"& .MuiInputBase-root":{height:"48px"}}}),k==="boxes"&&e.jsxs(y,{onClick:()=>te(o=>o==="asc"?"desc":"asc"),sx:{color:"white",borderColor:"rgba(255,255,255,0.2)",fontSize:"0.8rem",letterSpacing:.1,textTransform:"none",minWidth:"120px",height:"48px"},variant:"outlined",children:["Price ",O==="asc"?"↑":"↓"]})]})}),k!=="craft"&&e.jsxs(r,{onClick:()=>u("/games"),sx:{mb:4,background:s.bgGradient,borderRadius:"15px",overflow:"hidden",cursor:"pointer",position:"relative",border:`1px solid ${s.borderColor}`,transition:"all 0.3s ease",p:2.5,"&:hover":{border:`1px solid ${s.hoverBorderColor}`,boxShadow:s.buttonHoverShadow,"& .hover-effect":{transform:"translateY(-2px)"}}},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2.5,mb:2},children:[e.jsx(r,{sx:{width:"52px",height:"52px",borderRadius:"12px",background:s.primaryGradient,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,boxShadow:s.buttonShadow},children:e.jsx(a,{sx:{color:"white",fontWeight:"bold",fontSize:"1.8rem"},children:"💎"})}),e.jsxs(r,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[e.jsx(a,{sx:{color:s.primaryColor,fontWeight:"bold",fontSize:"1.2rem"},children:"999,999 TON"}),e.jsx(a,{sx:{color:"black",fontSize:"0.8rem",background:s.primaryGradient,px:1,py:.2,borderRadius:"4px",fontWeight:"bold"},children:"PRIZE POOL"})]}),e.jsx(a,{sx:{color:"rgba(255,255,255,0.8)",fontSize:"0.9rem",fontWeight:"500"},children:"Play games & win massive rewards!"})]})]}),e.jsx(r,{className:"hover-effect",sx:{width:"100%",transition:"transform 0.3s ease"},children:e.jsx(y,{variant:"contained",fullWidth:!0,sx:{background:s.primaryGradient,color:"black",textTransform:"none",py:1.5,fontSize:"0.95rem",fontWeight:"bold",boxShadow:s.buttonShadow,"&:hover":{background:"linear-gradient(90deg, #8ee9ff, #6ed3ff)",boxShadow:s.buttonHoverShadow}},children:"Play Now →"})})]}),e.jsx(r,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:e.jsxs(_e,{value:k,onChange:(o,t)=>H(t),sx:{"& .MuiTab-root":{color:"rgba(255,255,255,0.7)",textTransform:"none","&.Mui-selected":{color:s.primaryColor}},"& .MuiTabs-indicator":{backgroundColor:s.primaryColor}},children:[e.jsx(Z,{label:"Boxes",value:"boxes"}),e.jsx(Z,{label:"Sell items",value:"drops"}),e.jsx(Z,{label:"Craft",value:"craft"})]})}),$&&e.jsx(a,{sx:{color:"#ff4444",mb:2,textAlign:"center"},children:$}),k==="boxes"&&e.jsx(z,{container:!0,spacing:1,children:xe.sort((o,t)=>{if(o.id==="mystery-gift")return-1;if(t.id==="mystery-gift")return 1;const n=Q(o),d=Q(t);return n>0&&d===0?-1:n===0&&d>0?1:parseFloat(o.salePrice)-parseFloat(t.salePrice)}).map(o=>e.jsx(z,{item:!0,xs:6,children:e.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(le,{onClick:()=>X(o.id),sx:{position:"relative",background:o.id==="mystery-gift"?"linear-gradient(145deg, rgba(108,93,211,0.2) 0%, rgba(108,93,211,0.3) 100%)":"linear-gradient(145deg, rgba(26,27,35,0.9) 0%, rgba(26,27,35,0.95) 100%)",borderRadius:"15px",overflow:"hidden",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s",border:o.id==="mystery-gift"?"1px solid rgba(108,93,211,0.4)":`1px solid ${s.borderColor}`,height:"100%",minHeight:"330px"},children:[e.jsxs(r,{sx:{position:"absolute",top:10,left:10,background:s.primaryGradient,color:"black",px:1.5,py:.5,borderRadius:"8px",fontSize:"0.8rem",fontWeight:"bold",zIndex:1,display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Me,{size:16}),Q(o)]}),o.id==="mystery-gift"&&e.jsx(r,{sx:{position:"absolute",top:10,right:10,background:"linear-gradient(90deg, #6C7BDC, #6C7BDC80)",color:"white",px:1,py:.5,borderRadius:"20px",fontSize:"0.8rem",fontWeight:"bold",zIndex:1},children:"FREE"}),e.jsx(r,{component:"img",src:o.image,alt:o.title,sx:{width:"100%",height:"200px",mt:-3,mb:-7,objectFit:"contain",p:1}}),e.jsxs(r,{sx:{p:2},children:[e.jsx(a,{variant:"h6",sx:{color:"white",fontWeight:"bold",fontSize:"1rem"},children:o.title}),e.jsx(a,{sx:{color:"rgba(255,255,255,0.7)",mb:2,fontSize:"0.9rem",height:"40px",overflow:"hidden"},children:o.description}),e.jsx(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:o.id==="mystery-gift"?e.jsx(r,{sx:{width:"100%",height:"24px"}}):e.jsxs(e.Fragment,{children:[e.jsxs(a,{sx:{color:"rgba(255,255,255,0.5)",textDecoration:"line-through",fontSize:"0.9rem"},children:["$",o.normalPrice]}),e.jsxs(a,{sx:{color:s.primaryColor,fontWeight:"bold",fontSize:"1.2rem"},children:["$",o.salePrice]})]})}),e.jsx(y,{onClick:()=>X(o.id),variant:"contained",fullWidth:!0,sx:{mt:1,textTransform:"none",background:o.id==="mystery-gift"?"linear-gradient(90deg, #0088CC, #00A3FF)":s.primaryGradient,color:"black"},children:o.id==="mystery-gift"?"Open Free Box":"Open Box"})]})]})})},o.id))}),k==="drops"&&Ce(),k==="craft"&&e.jsx(r,{sx:{maxWidth:"600px",margin:"0 auto"},children:e.jsx(Ir,{keyParts:(i==null?void 0:i.keyParts)||0,onCraftKey:ve,isLoading:U,onOpenFreeBox:()=>X("mystery-gift")})}),e.jsx(jr,{isOpening:w,onAnimationComplete:()=>{S(!1),f(!0)},onClose:()=>S(!1)}),g&&e.jsx(wr,{reward:g,isVisible:h,onClose:we}),e.jsx(Ne,{open:je,onClose:()=>ie(!1)}),e.jsx(de,{open:fe,onClose:()=>F(!1),sx:{display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100},children:e.jsx(r,{sx:{backgroundColor:"rgba(18, 22, 25, 0.95)",backdropFilter:"blur(20px)",borderRadius:"24px",padding:"32px",width:"90%",maxWidth:"360px",border:"1px solid rgba(110, 211, 255, 0.1)",outline:"none",display:"flex",flexDirection:"column",alignItems:"center",gap:"24px",position:"relative",zIndex:9999},children:e.jsxs(r,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:3,width:"100%"},children:[e.jsxs(r,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsxs(r,{sx:{width:"80px",height:"80px",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx(r,{component:"img",src:me,alt:"Upgrade Ticket",sx:{width:"100%",height:"100%",objectFit:"contain",animation:"float 3s ease-in-out infinite","@keyframes float":{"0%, 100%":{transform:"translateY(0)"},"50%":{transform:"translateY(-10px)"}}}}),e.jsx(r,{sx:{position:"absolute",width:"100%",height:"10px",bottom:"-15px",background:"radial-gradient(ellipse at center, rgba(110, 211, 255, 0.3) 0%, rgba(110, 211, 255, 0) 70%)",animation:"shadow 3s ease-in-out infinite","@keyframes shadow":{"0%, 100%":{transform:"scale(1)",opacity:.3},"50%":{transform:"scale(0.7)",opacity:.1}}}})]}),e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(a,{sx:{color:"white",fontSize:"20px",fontWeight:"600",mb:1},children:"Level Upgrade Required"}),e.jsx(a,{sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"14px",lineHeight:1.5},children:"You need to upgrade your level to sell items !!!"})]})]}),e.jsxs(r,{sx:{width:"100%",display:"flex",gap:2,mb:1},children:[e.jsxs(r,{sx:{flex:1,background:"linear-gradient(145deg, rgba(110, 211, 255, 0.1) 0%, rgba(110, 211, 255, 0.05) 100%)",borderRadius:"16px",padding:"16px",border:"1px solid rgba(110, 211, 255, 0.1)",display:"flex",flexDirection:"column",alignItems:"center",gap:1,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(110, 211, 255, 0.1), transparent)",animation:"shine 2s infinite"},"@keyframes shine":{"100%":{left:"100%"}}},children:[e.jsx(a,{sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"12px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Current Level"}),e.jsx(a,{sx:{color:"#6ed3ff",fontSize:"24px",fontWeight:"600",textShadow:"0 0 10px rgba(110, 211, 255, 0.5)"},children:(i==null?void 0:i.level)||0})]}),e.jsxs(r,{sx:{flex:1,background:"linear-gradient(145deg, rgba(110, 211, 255, 0.1) 0%, rgba(110, 211, 255, 0.05) 100%)",borderRadius:"16px",padding:"16px",border:"1px solid rgba(110, 211, 255, 0.1)",display:"flex",flexDirection:"column",alignItems:"center",gap:1,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(110, 211, 255, 0.1), transparent)",animation:"shine 2s infinite 1s"}},children:[e.jsx(a,{sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"12px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Tickets"}),e.jsx(a,{sx:{color:"#6ed3ff",fontSize:"24px",fontWeight:"600",textShadow:"0 0 10px rgba(110, 211, 255, 0.5)"},children:(i==null?void 0:i.tickets)||0})]})]}),oe&&e.jsxs(a,{sx:{color:"#ff4d4d",fontSize:"14px",textAlign:"center",padding:"12px",backgroundColor:"rgba(255, 77, 77, 0.1)",borderRadius:"12px",width:"100%",border:"1px solid rgba(255, 77, 77, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx("span",{role:"img","aria-label":"warning",children:"⚠️"}),oe]}),e.jsxs(r,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:2},children:[e.jsx(y,{fullWidth:!0,onClick:Se,disabled:K||!(i!=null&&i.tickets)||(i==null?void 0:i.tickets)<1,sx:{background:"linear-gradient(90deg, #6ed3ff, #8ee9ff)",color:"black",height:"48px",borderRadius:"12px",fontSize:"16px",fontWeight:"600",textTransform:"none",position:"relative",overflow:"hidden","&:hover":{background:"linear-gradient(90deg, #8ee9ff, #6ed3ff)"},"&:disabled":{background:"rgba(110, 211, 255, 0.1)",color:"rgba(255, 255, 255, 0.3)"},"&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)",animation:"shine 2s infinite"}},children:K?e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Y,{size:20,thickness:5,sx:{color:"black"}}),"Processing..."]}):"Use Upgrade Ticket"}),(()=>{const o=(i==null?void 0:i.level)||0,t=o+1,n=(i==null?void 0:i.tickets)||0,d=t-n;return o===0&&d===1?e.jsx(Fr,{onAdComplete:()=>F(!0),disabled:K}):d>0?e.jsx(y,{fullWidth:!0,onClick:()=>ie(!0),sx:{background:"linear-gradient(90deg, #0088CC, #00A3FF)",color:"white",height:"48px",borderRadius:"12px",fontSize:"16px",fontWeight:"600",textTransform:"none",position:"relative",overflow:"hidden","&:hover":{background:"linear-gradient(90deg, #00A3FF, #0088CC)"},"&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)",animation:"shine 2s infinite"}},children:"Get More Tickets"}):null})(),e.jsx(a,{sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"14px",textAlign:"center",padding:"8px 12px",borderRadius:"8px"},children:(()=>{const t=((i==null?void 0:i.level)||0)+1,n=(i==null?void 0:i.tickets)||0,d=t-n;return d>0?`You need ${d} more ticket${d>1?"s":""} to reach Level ${t}`:null})()}),e.jsx(y,{fullWidth:!0,onClick:()=>F(!1),sx:{color:"rgba(255, 255, 255, 0.6)",height:"48px",fontSize:"16px",textTransform:"none","&:hover":{background:"rgba(255, 255, 255, 0.1)"}},children:"Cancel"})]})]})})}),e.jsx(de,{open:ye,onClose:()=>q(!1),sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(r,{sx:{backgroundColor:"rgba(18, 22, 25, 0.95)",backdropFilter:"blur(20px)",borderRadius:"24px",padding:"32px",width:"90%",maxWidth:"360px",border:"1px solid rgba(110, 211, 255, 0.2)",outline:"none",display:"flex",flexDirection:"column",alignItems:"center",gap:"24px",animation:"popIn 0.3s ease-out","@keyframes popIn":{"0%":{transform:"scale(0.9)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}},children:[e.jsx(r,{sx:{width:"80px",height:"80px",borderRadius:"50%",backgroundColor:"rgba(110, 211, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",animation:"pulse 1s ease-out"},children:e.jsx(Ve,{sx:{fontSize:40,color:"#6ed3ff",animation:"rotate 1s ease-out"}})}),e.jsx(a,{sx:{color:"#6ed3ff",fontSize:"24px",fontWeight:"500",textAlign:"center"},children:"Level Up!"}),e.jsx(a,{sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"16px",textAlign:"center"},children:`You've reached Level ${(i==null?void 0:i.level)||1}`})]})})]})})};export{Br as default};
//# sourceMappingURL=BoxOpening-BFPlTemq.js.map
