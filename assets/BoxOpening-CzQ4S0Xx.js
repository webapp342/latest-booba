import{i as Le,g as me,f as Re,j as e,D as Te,s as G,a as We,B as r,T as i,b as f,d as $,u as M,c as N,m as H,e as Ae,I as Fe,h as Ee,C as V,r as De,k as Ue,l as Be,n as $e,o as Oe,w as ne,S as Ge,t as ue,H as _e,p as se,q as Me,v as le,x as Ne,y as He,z as Ve,A as J,G as T,E as de,P as Ye,F as Ke,M as ce,J as qe,U as Qe,K as Xe,L as Ze,N as Je,O as er,Q as rr,R as tr,V as or,W as ar,X as ir,Y as nr,Z as sr,_ as lr,$ as dr,a0 as cr,a1 as xr,a2 as gr,a3 as mr,a4 as ur,a5 as pr,a6 as hr,a7 as fr,a8 as br,a9 as yr,aa as jr,ab as wr}from"./index-CSYYAoai.js";import{r as s,u as vr,e as Sr,c as Cr}from"./vendor-Btj0IEn_.js";import{B as kr,R as Ir,d as ee,g as Pr}from"./firebase-BcskSX77.js";const zr=Le(Re),Lr=me(zr),Rr=({debug:u,blockId:b})=>{const a=s.useRef(null),[c,w]=s.useState(!1),[k,g]=s.useState(!1),[v,S]=s.useState(!0),I=async()=>{try{g(!0);const y=localStorage.getItem("telegramUserId");if(!y)throw new Error("User ID not found");const P=$(Lr,"users",y);await M(P,{keyParts:N(5)}),w(!1)}catch(y){console.error("Error claiming reward:",y)}finally{g(!1)}};return s.useEffect(()=>{const y=x=>{w(!0)},P=()=>{S(!1)},j=a.current;return j&&(j.addEventListener("reward",y),j.addEventListener("onBannerNotFound",P)),()=>{j&&(j.removeEventListener("reward",y),j.removeEventListener("onBannerNotFound",P))}},[]),customElements.get("adsgram-task")?v?e.jsx(e.Fragment,{children:e.jsxs(e.Fragment,{children:[e.jsxs("adsgram-task",{className:G.task,"data-block-id":b,"data-debug":u,ref:a,children:[e.jsx("span",{slot:"reward",className:G.reward,children:"Get free key parts"}),e.jsx("div",{slot:"button",className:G.button,children:"Go"}),e.jsx("div",{slot:"done",className:G.button_done,children:"Done"})]}),e.jsx(We,{anchor:"bottom",open:c,onClose:()=>w(!1),PaperProps:{sx:{backgroundColor:"#1A2126",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",border:"1px solid rgba(110, 211, 255, 0.1)"}},children:e.jsxs(r,{sx:{p:3,textAlign:"center"},children:[e.jsx(i,{variant:"h6",sx:{color:"#fff",fontWeight:600,mb:1},children:"You've earned 5 key parts for completing this task !"}),e.jsx(i,{sx:{color:"rgba(255,255,255,0.7)",mb:3},children:"Now you can craft a KEY with 5 key parts !"}),e.jsx(f,{variant:"contained",onClick:I,disabled:k,sx:{backgroundColor:"rgba(110, 211, 255, 0.1)",color:"#6ed3ff","&:hover":{backgroundColor:"rgba(110, 211, 255, 0.2)"},minWidth:120},children:k?"Claiming...":"Claim Reward"})]})})]})}):e.jsx(Te,{}):null},h={primaryColor:"#6ed3ff",primaryGradient:"linear-gradient(90deg, #6ed3ff, #8ee9ff)",bgGradient:"linear-gradient(135deg, rgba(110, 211, 255, 0.3) 0%, rgba(110, 211, 255, 0.1) 100%)",borderColor:"rgba(110, 211, 255, 0.2)",hoverBorderColor:"rgba(110, 211, 255, 0.4)",buttonShadow:"0 4px 12px rgba(110, 211, 255, 0.3)",buttonHoverShadow:"0 6px 16px rgba(110, 211, 255, 0.4)"},Tr=({keyParts:u,onCraftKey:b,isLoading:a})=>{const c=u>=5,w=u/5*100;return e.jsx(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(r,{sx:{mt:4,p:3,background:h.bgGradient,borderRadius:"15px",border:`1px solid ${h.borderColor}`,position:"relative",overflow:"hidden",transition:"all 0.3s ease","&:hover":{border:`1px solid ${h.hoverBorderColor}`,boxShadow:h.buttonHoverShadow}},children:[e.jsx(r,{sx:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:`radial-gradient(circle, ${h.primaryColor}15 0%, ${h.primaryColor}00 70%)`,pointerEvents:"none",opacity:c?1:0,transition:"opacity 0.3s ease"}}),e.jsxs(r,{sx:{position:"relative",zIndex:1},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(r,{sx:{width:"48px",height:"48px",borderRadius:"12px",background:h.primaryGradient,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:h.buttonShadow},children:e.jsx(Ae,{sx:{color:"white",fontSize:"1.8rem"}})}),e.jsxs(r,{children:[e.jsx(i,{variant:"h6",sx:{color:"white",fontWeight:"bold",lineHeight:1.2},children:"Key Crafting"}),e.jsx(i,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.9rem"},children:"Collect 5 parts to craft a key"})]})]}),e.jsx(Fe,{sx:{color:"rgba(255,255,255,0.7)","&:hover":{color:h.primaryColor}},children:e.jsx(Ee,{})})]}),e.jsxs(r,{sx:{mb:3},children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(i,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.9rem"},children:"Progress"}),e.jsxs(i,{sx:{color:c?h.primaryColor:"rgba(255,255,255,0.7)",fontWeight:"bold",fontSize:"0.9rem"},children:[u,"/5 parts"]})]}),e.jsx(r,{sx:{width:"100%",height:"8px",background:"rgba(255,255,255,0.1)",borderRadius:"4px",overflow:"hidden"},children:e.jsx(H.div,{initial:{width:0},animate:{width:`${w}%`},transition:{duration:.5},style:{height:"100%",background:c?h.primaryGradient:"linear-gradient(90deg, rgba(255,255,255,0.2), rgba(255,255,255,0.3))",borderRadius:"4px"}})})]}),e.jsxs(r,{sx:{mt:3,display:"flex",flexDirection:"column",gap:2},children:[e.jsx(f,{variant:"contained",onClick:b,disabled:!c||a,fullWidth:!0,sx:{py:1.5,background:c?h.primaryGradient:"rgba(255,255,255,0.1)",color:c?"black":"rgba(255,255,255,0.5)",fontWeight:"bold",fontSize:"0.95rem",borderRadius:"8px",textTransform:"none",position:"relative",boxShadow:c?h.buttonShadow:"none","&:hover":{background:c?"linear-gradient(90deg, #8ee9ff, #6ed3ff)":"rgba(255,255,255,0.1)",boxShadow:c?h.buttonHoverShadow:"none"},"&:disabled":{background:"rgba(255,255,255,0.1)",color:"rgba(255,255,255,0.3)"}},children:a?e.jsx(V,{size:24,sx:{color:c?"black":"rgba(255,255,255,0.5)"}}):e.jsx(e.Fragment,{children:c?"Craft Key":"Insufficient Parts"})}),!c&&e.jsx(Rr,{blockId:"task-8200",debug:!1})]})]})]})})};var te={},Wr=Ue;Object.defineProperty(te,"__esModule",{value:!0});var pe=te.default=void 0,Ar=Wr(De()),Fr=e;pe=te.default=(0,Ar.default)((0,Fr.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");const Er=me(Oe),Dr=Be`
  0% {
    transform: rotate(0deg);
  }
  50% {
    transform: rotate(180deg);
  }
  100% {
    transform: rotate(360deg);
  }
`,Ur=$e(r)`
  animation: ${Dr} 2s steps(2) infinite;
  display: flex;
  align-items: center;
  justify-content: center;
`,xe="https://www.effectiveratecpm.com/rfzqpxh9b5?key=363850befc2ce02b0f1173157255afe8",C=2,W="levelUpgradeViewCount",_="lastLevelUpgradeClaim",re=15*60*1e3,Br=({onAdComplete:u,disabled:b})=>{const[a,c]=s.useState(!1),[w,k]=s.useState(null),[g,v]=s.useState(0),[S,I]=s.useState(null);s.useEffect(()=>{const x=localStorage.getItem(_);if(x){const m=parseInt(x),F=Date.now()-m;F<re?(I(re-F),localStorage.removeItem(W),v(0)):(localStorage.removeItem(_),localStorage.removeItem(W),v(0),I(null))}else{const m=localStorage.getItem(W);m&&v(parseInt(m))}},[]),s.useEffect(()=>{if(S===null)return;const x=setInterval(()=>{I(m=>m===null||m<=1e3?(clearInterval(x),localStorage.removeItem(_),localStorage.removeItem(W),v(0),null):m-1e3)},1e3);return()=>clearInterval(x)},[S]);const y=s.useCallback(()=>{var x;c(!0),k(null);try{(x=window.Telegram)!=null&&x.WebApp?window.Telegram.WebApp.openLink(xe):window.open(xe,"_blank");const m=g+1;v(m),localStorage.setItem(W,m.toString()),m>=C&&u&&u()}catch{k("Failed to load advertisement. Please try again.")}finally{c(!1)}},[u,g]),P=async()=>{try{c(!0);const x=localStorage.getItem("telegramUserId");if(!x)throw new Error("User ID not found");const m=$(Er,"users",x);await M(m,{tickets:N(1)}),localStorage.removeItem(W),v(0);const A=Date.now();localStorage.setItem(_,A.toString()),I(re),u&&u()}catch{k("Failed to claim reward. Please try again.")}finally{c(!1)}},j=x=>`${Math.ceil(x/1e3)}s`;return e.jsxs(r,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:[e.jsx(f,{fullWidth:!0,variant:"contained",onClick:g>=C?P:y,disabled:b||a||S!==null,startIcon:g>=C?null:e.jsx("img",{src:ne,alt:"",width:32}),sx:{backgroundColor:g>=C?"rgba(76, 175, 80, 0.1)":"rgba(110, 211, 255, 0.1)",color:g>=C?"#4caf50":"#6ed3ff",border:g>=C?"1px solid rgba(76, 175, 80, 0.5)":"1px solid rgba(110, 211, 255, 0.2)","&:hover":{backgroundColor:g>=C?"rgba(76, 175, 80, 0.2)":"rgba(110, 211, 255, 0.2)",border:g>=C?"1px solid rgba(76, 175, 80, 0.7)":"1px solid rgba(110, 211, 255, 0.3)"},"&:disabled":{backgroundColor:"rgba(255, 255, 255, 0.05)",color:"rgba(255, 255, 255, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)",opacity:.7,cursor:"not-allowed"},borderRadius:2,display:"flex",alignItems:"center",gap:1,textTransform:"none",fontSize:"0.95rem",fontWeight:600,transition:"all 0.2s ease"},children:a?e.jsx(V,{size:24,sx:{color:"inherit"}}):S!==null?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:ne,alt:"",width:32}),"Earn Free Ticket"]}):b?e.jsxs(e.Fragment,{children:[e.jsx(Ge,{size:18,strokeWidth:1.5}),"Use Upgrade Ticket"]}):g>=C?e.jsxs(e.Fragment,{children:[e.jsx(r,{component:"img",src:ue,sx:{width:20,height:20,mr:1}}),"Claim 1 Ticket"]}):e.jsxs(e.Fragment,{children:["Earn Free Ticket",g>0&&e.jsxs(r,{sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"8px",px:1,py:.5,fontSize:"0.85rem",ml:1,border:"1px solid rgba(255, 255, 255, 0.1)"},children:[g,"/",C]})]})}),S!==null&&e.jsxs(i,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.5)",display:"flex",alignItems:"center",gap:1,fontSize:"0.85rem",mt:-1},children:[e.jsx(Ur,{children:e.jsx(_e,{size:14,color:"rgba(255, 255, 255, 0.5)"})}),`Level Upgrade in ${j(S)}`]}),w&&e.jsx(i,{color:"error",variant:"body2",textAlign:"center",children:w})]})},$r="/assets/01_ROLEX_DAYTONA-Box-mock_box_tgFf3C6-CYGAuzWj.png",ge=[{id:"mystery-gift",image:Xe,title:"Mystery Gift Box",normalPrice:"FREE",salePrice:"FREE",description:"Get free boxes for every deposits",brand:"Special"},{id:"alienware",image:Ze,title:"ALIENWARE",normalPrice:"16.89",salePrice:"14.49",description:"Gaming gear from Alienware",brand:"Tech"},{id:"amazon",image:Je,title:"Amazon",normalPrice:"10.49",salePrice:"8.89",description:"Amazon mystery box with various items",brand:"Retail"},{id:"landrover",image:er,title:"Land Rover",normalPrice:"199.99",salePrice:"169.99",description:"Luxury SUV themed box with exclusive Land Rover items",brand:"Automotive"},{id:"rolex-submariner",image:rr,title:"Submariner",normalPrice:"89.99",salePrice:"85.45",description:"Luxury diving watch themed box",brand:"Luxury"},{id:"donald-trump",image:tr,title:"Donald Trump",normalPrice:"6.99",salePrice:"5.45",description:"Political memorabilia box",brand:"Politics"},{id:"rolex-yachtmaster",image:or,title:"Yachtmaster",normalPrice:"199.99",salePrice:"149.99",description:"Luxury yacht watch themed box",brand:"Luxury"},{id:"rolex",image:ar,title:"Rolex Collection",normalPrice:"299.99",salePrice:"249.99",description:"Premium Rolex collection box",brand:"Luxury"},{id:"chanel",image:ir,title:"Chanel",normalPrice:"199.99",salePrice:"169.99",description:"Luxury fashion box featuring Chanel items",brand:"Luxury"},{id:"louis-vuitton",image:nr,title:"Louis Vuitton",normalPrice:"99.99",salePrice:"95.45",description:"Premium Louis Vuitton fashion items",brand:"Luxury"},{id:"bmw",image:sr,title:"BMW Box",normalPrice:"189.99",salePrice:"159.99",description:"BMW themed luxury automotive box",brand:"Automotive"},{id:"prime",image:lr,title:"Prime Box",normalPrice:"39.99",salePrice:"34.99",description:"Premium selection mystery box",brand:"Various"},{id:"sneakers",image:dr,title:"Sneakers Box",normalPrice:"29.99",salePrice:"19.99",description:"Premium sneaker collection box",brand:"Fashion"},{id:"rolex-daytona",image:$r,title:"Rolex Daytona",normalPrice:"299.99",salePrice:"249.99",description:"Luxury racing watch themed box",brand:"Luxury"},{id:"corsair",image:cr,title:"Corsair Gaming",normalPrice:"49.99",salePrice:"45.99",description:"Premium gaming gear box",brand:"Tech"},{id:"versace",image:xr,title:"Versace",normalPrice:"149.99",salePrice:"119.99",description:"Luxury Italian fashion box",brand:"Luxury"},{id:"football-frenzy",image:gr,title:"Football Frenzy",normalPrice:"9.99",salePrice:"7.45",description:"Football themed mystery box",brand:"Sports"},{id:"maserati",image:mr,title:"Maserati",normalPrice:"299.99",salePrice:"249.99",description:"Italian luxury automotive box",brand:"Automotive"},{id:"topg",image:ur,title:"Top G",normalPrice:"49.99",salePrice:"45.50",description:"Premium lifestyle box",brand:"Lifestyle"},{id:"porsche",image:pr,title:"Porsche",normalPrice:"149.99",salePrice:"125.45",description:"Sports car themed luxury box",brand:"Automotive"},{id:"ferrari",image:hr,title:"Ferrari",normalPrice:"199.99",salePrice:"149.99",description:"Italian supercar themed box",brand:"Automotive"},{id:"old-money",image:fr,title:"Old Money",normalPrice:"29.99",salePrice:"24.99",description:"Classic luxury lifestyle box",brand:"Lifestyle"},{id:"cartier",image:br,title:"Cartier",normalPrice:"199.99",salePrice:"149.99",description:"Luxury jewelry themed box",brand:"Luxury"},{id:"diamond-vault",image:yr,title:"Diamond Vault",normalPrice:"199.99",salePrice:"159.99",description:"Premium diamond jewelry box",brand:"Luxury"},{id:"hublot",image:jr,title:"Hublot",normalPrice:"99.99",salePrice:"89.99",description:"Luxury Swiss watch themed box",brand:"Luxury"}],l={primaryColor:"#6ed3ff",primaryGradient:"linear-gradient(90deg, #6ed3ff, #8ee9ff)",bgGradient:"linear-gradient(135deg, rgba(110, 211, 255, 0.3) 0%, rgba(110, 211, 255, 0.1) 100%)",borderColor:"rgba(110, 211, 255, 0.2)",hoverBorderColor:"rgba(110, 211, 255, 0.4)",buttonShadow:"0 4px 12px rgba(110, 211, 255, 0.3)",buttonHoverShadow:"0 6px 16px rgba(110, 211, 255, 0.4)"},Mr=()=>{const u=vr(),b=Sr(),[a,c]=s.useState(null),[w,k]=s.useState(!1),[g,v]=s.useState(null),[S,I]=s.useState(!1),[y,P]=s.useState(!1),[j,x]=s.useState(null),[m,A]=s.useState(!0),[F,he]=s.useState(""),[O,oe]=s.useState("asc"),[z,Y]=s.useState("boxes"),[E,fe]=s.useState("price"),[be,D]=s.useState(!1),[,ye]=s.useState(null),[K,U]=s.useState(!1),[ae,B]=s.useState(""),[je,q]=s.useState(!1),[we,ie]=s.useState(!1),[ve,Q]=s.useState(!1),X=Cr.useCallback(o=>{var n;if(!a)return 0;if(o.id==="mystery-gift")return a.giftBox||0;const t=se[o.id];return t?((n=a.boxes)==null?void 0:n[t.title])||0:(console.log("Box not found:",o.id),0)},[a]);s.useEffect(()=>{var o;(o=b.state)!=null&&o.defaultTab&&(Y(b.state.defaultTab),u(b.pathname,{replace:!0}))},[b.state]),s.useEffect(()=>{const o=localStorage.getItem("telegramUserId");if(!o){u("/spin");return}const t=Me($(ee,"users",o),n=>{if(n.exists()){const d=n.data();c(d),console.log("Firebase Boxes:",d.boxes),console.log("Game Cards:",ge.map(L=>L.title))}else x("Kullanıcı verisi bulunamadı");A(!1)},n=>{console.error("Error fetching user stats:",n),x("Veriler yüklenirken hata oluştu"),A(!1)});return()=>t()},[u]),s.useEffect(()=>{localStorage.getItem("userAgreementAccepted")||Q(!0)},[]);const Z=o=>{u(`/box/${o}`)},Se=()=>{I(!1),v(null)},Ce=async()=>{const o=localStorage.getItem("telegramUserId");if(!a||a.keyParts<5){x("Yetersiz anahtar parçası");return}x(null),P(!0);try{const t=$(ee,"users",o);await M(t,{keyParts:N(-5),keys:N(1)}),Pr.to(document.body,{duration:.2,scale:1.02,yoyo:!0,repeat:1,ease:"power2.inOut"})}catch(t){console.error("Error crafting key:",t),x("Anahtar oluşturulurken bir hata oluştu")}finally{P(!1)}},ke=()=>{if(!(a!=null&&a.drops)||Object.keys(a.drops).length===0)return e.jsxs(r,{sx:{textAlign:"center",py:3,px:3,background:l.bgGradient,borderRadius:"15px",border:`1px solid ${l.borderColor}`,maxWidth:"600px",margin:"0 auto"},children:[e.jsx(i,{variant:"h5",sx:{color:"white",fontWeight:"bold",mt:-1},children:"No Items Found"}),e.jsx(i,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"1rem",mb:3,maxWidth:"400px",margin:"0 auto"},children:"Start your collection by opening mystery boxes and discover amazing rewards!"}),e.jsx(r,{sx:{display:"flex",justifyContent:"center",flexWrap:"wrap"},children:e.jsx(f,{onClick:()=>Y("boxes"),variant:"contained",sx:{background:l.primaryGradient,color:"black",py:1.5,fontSize:"0.95rem",fontWeight:"bold",textTransform:"none",borderRadius:"8px",boxShadow:l.buttonShadow,mt:2},children:"Open Boxes"})})]});let o=Object.entries(a.drops).flatMap(([t,n])=>n.map(d=>{const L=Object.values(se).find(R=>R.title===t),p=L==null?void 0:L.drops.find(R=>R.code===d.code);return{...d,boxTitle:t,name:(p==null?void 0:p.name)||"Unknown Item",image:(p==null?void 0:p.image)||"",price:(p==null?void 0:p.price)||"0",rarity:(p==null?void 0:p.rarity)||0}}));return o=o.filter(t=>{const n=F.toLowerCase();return t.name.toLowerCase().includes(n)||t.boxTitle.toLowerCase().includes(n)}),o.sort((t,n)=>{switch(E){case"price":return O==="asc"?parseFloat(t.price)-parseFloat(n.price):parseFloat(n.price)-parseFloat(t.price);case"rarity":return O==="asc"?t.rarity-n.rarity:n.rarity-t.rarity;default:return 0}}),e.jsxs(r,{children:[e.jsxs(r,{sx:{mb:3,p:3,borderRadius:"15px",background:"rgba(110, 211, 255, 0.05)",border:`1px solid ${l.borderColor}`},children:[e.jsx(i,{variant:"h6",sx:{color:"white",mb:2},children:"My Collection Summary"}),e.jsxs(T,{container:!0,spacing:2,children:[e.jsx(T,{item:!0,xs:4,children:e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(i,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.9rem"},children:"Total Items"}),e.jsx(i,{sx:{color:l.primaryColor,fontWeight:"bold",fontSize:"1.5rem"},children:o.length})]})}),e.jsx(T,{item:!0,xs:4,children:e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(i,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.9rem"},children:"Total Value"}),e.jsxs(i,{sx:{color:l.primaryColor,fontWeight:"bold",fontSize:"1.5rem"},children:["$",o.reduce((t,n)=>t+parseFloat(n.price)*n.amount,0).toFixed(2)]})]})}),e.jsx(T,{item:!0,xs:4,children:e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(i,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.9rem"},children:"Uniques"}),e.jsx(i,{sx:{color:l.primaryColor,fontWeight:"bold",fontSize:"1.5rem"},children:new Set(o.map(t=>t.boxTitle)).size})]})})]})]}),e.jsxs(r,{sx:{mb:3,display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(r,{sx:{display:"flex",gap:1,flex:2},children:["price","rarity"].map(t=>e.jsx(f,{onClick:()=>fe(t),variant:E===t?"contained":"outlined",size:"small",fullWidth:!0,sx:{color:E===t?"white":"rgba(255,255,255,0.7)",borderColor:l.borderColor,backgroundColor:E===t?l.primaryColor:"transparent","&:hover":{backgroundColor:E===t?"#8ee9ff":"rgba(110, 211, 255, 0.1)"},fontSize:"0.8rem",letterSpacing:.1,textTransform:"none",height:"36px"},children:t.charAt(0).toUpperCase()+t.slice(1)},t))}),e.jsx(f,{onClick:()=>oe(t=>t==="asc"?"desc":"asc"),variant:"outlined",size:"small",fullWidth:!0,sx:{flex:1,color:"white",borderColor:l.borderColor,fontSize:"0.8rem",letterSpacing:.1,textTransform:"none",height:"36px"},children:O==="asc"?"↑ Ascending":"↓ Descending"})]}),e.jsx(T,{container:!0,spacing:2,children:o.map((t,n)=>e.jsx(T,{item:!0,xs:12,sm:6,md:4,children:e.jsx(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:n*.1},children:e.jsxs(de,{sx:{position:"relative",background:"linear-gradient(145deg, rgba(26,27,35,0.9) 0%, rgba(26,27,35,0.95) 100%)",borderRadius:"15px",overflow:"hidden",border:`1px solid ${l.borderColor}`,height:"100%",transition:"transform 0.2s",minHeight:"420px"},children:[e.jsxs(r,{sx:{position:"relative",pt:"75%",background:"linear-gradient(45deg, rgba(108,93,211,0.1) 0%, rgba(108,93,211,0.05) 100%)"},children:[e.jsx(r,{component:"img",src:t.image,alt:t.name,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",mb:1,objectFit:"contain",p:.5}}),e.jsx(r,{sx:{position:"absolute",top:10,right:10,background:"rgba(108,93,211,0.9)",borderRadius:"12px",px:1.5,py:.5},children:e.jsxs(i,{sx:{color:"white",fontSize:"0.8rem",fontWeight:"bold"},children:[(t.rarity*100).toFixed(2),"% Rare"]})})]}),e.jsxs(r,{sx:{p:2},children:[e.jsxs(r,{sx:{mb:2},children:[e.jsx(i,{variant:"h6",sx:{color:"white",fontWeight:"bold",fontSize:"1.1rem",mb:.5},children:t.name}),e.jsxs(i,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.85rem",display:"flex",alignItems:"center",gap:.5},children:["From: ",t.boxTitle]})]}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(108,93,211,0.1)",borderRadius:"12px",p:1.5,mb:2},children:[e.jsxs(r,{children:[e.jsx(i,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.8rem"},children:"Value"}),e.jsxs(i,{sx:{color:l.primaryColor,fontWeight:"bold",fontSize:"1.2rem"},children:["$",t.price]})]}),e.jsxs(r,{sx:{textAlign:"right"},children:[e.jsx(i,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.8rem"},children:"Amount"}),e.jsxs(i,{sx:{color:l.primaryColor,fontWeight:"bold",fontSize:"1.2rem"},children:[t.amount,"x"]})]})]}),e.jsxs(f,{variant:"contained",fullWidth:!0,onClick:d=>{d.stopPropagation(),Pe(t)},sx:{background:"linear-gradient(90deg, #6ed3ff, #8ee9ff)",color:"black",py:1.5,fontSize:"0.95rem",fontWeight:"bold",textTransform:"none",borderRadius:"8px",boxShadow:"0 4px 12px rgba(110,211,255,0.3)","&:hover":{background:"linear-gradient(90deg, #8ee9ff, #6ed3ff)",boxShadow:"0 6px 16px rgba(110,211,255,0.4)"}},children:["Sell Item for $",(parseFloat(t.price)*t.amount).toFixed(2)]})]})]})})},`${t.code}-${n}`))})]})},Ie=async()=>{U(!0),B("");const o=localStorage.getItem("telegramUserId");if(!o){B("User ID not found"),U(!1);return}try{const t=$(ee,"users",o),n=await wr(t);if(!n.exists()){B("User data not found"),U(!1);return}const d=n.data(),L=d.level||0,p=L+1,R=p;if(!d.tickets||d.tickets<R){B(`Not enough tickets. Need ${R} tickets for level ${p}`),U(!1);return}await M(t,{level:p,tickets:d.tickets-R,lastLevelUpgrade:new Date().toISOString(),upgradeTransaction:{amount:R,timestamp:new Date().toISOString(),type:"TICKET_UPGRADE",fromLevel:L,toLevel:p}}),D(!1),q(!0),setTimeout(()=>{q(!1)},2e3)}catch(t){console.error("Error processing level upgrade:",t),B("Failed to process upgrade. Please try again.")}finally{U(!1)}},Pe=async o=>{if(!localStorage.getItem("telegramUserId"))return;if(((a==null?void 0:a.level)||0)<200){ye(o),D(!0);return}console.log("Selling item:",o)},ze=()=>{localStorage.setItem("userAgreementAccepted","true"),Q(!1)};return m?e.jsx(le,{maxWidth:"lg",children:e.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e.jsx(V,{})})}):e.jsx(le,{maxWidth:"lg",children:e.jsxs(r,{sx:{mt:-5,pb:25},children:[z!=="craft"&&e.jsx(r,{sx:{mb:4},children:e.jsxs(r,{sx:{display:"flex",gap:2,alignItems:"stretch"},children:[e.jsx(Ne,{fullWidth:!0,variant:"outlined",placeholder:z==="boxes"?"Search boxes...":"Search drops...",value:F,onChange:o=>he(o.target.value),InputProps:{startAdornment:e.jsx(He,{position:"start",children:e.jsx(pe,{sx:{color:"white"}})}),sx:{color:"white",height:"100%","& .MuiOutlinedInput-root":{height:"100%"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.2)"}}},sx:{"& .MuiInputBase-root":{height:"48px"}}}),z==="boxes"&&e.jsxs(f,{onClick:()=>oe(o=>o==="asc"?"desc":"asc"),sx:{color:"white",borderColor:"rgba(255,255,255,0.2)",fontSize:"0.8rem",letterSpacing:.1,textTransform:"none",minWidth:"120px",height:"48px"},variant:"outlined",children:["Price ",O==="asc"?"↑":"↓"]})]})}),z!=="craft"&&e.jsxs(r,{onClick:()=>u("/games"),sx:{mb:4,background:l.bgGradient,borderRadius:"15px",overflow:"hidden",cursor:"pointer",position:"relative",border:`1px solid ${l.borderColor}`,transition:"all 0.3s ease",p:2.5,"&:hover":{border:`1px solid ${l.hoverBorderColor}`,boxShadow:l.buttonHoverShadow,"& .hover-effect":{transform:"translateY(-2px)"}}},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2.5,mb:2},children:[e.jsx(r,{sx:{width:"52px",height:"52px",borderRadius:"12px",background:l.primaryGradient,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,boxShadow:l.buttonShadow},children:e.jsx(i,{sx:{color:"white",fontWeight:"bold",fontSize:"1.8rem"},children:"💎"})}),e.jsxs(r,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[e.jsx(i,{sx:{color:l.primaryColor,fontWeight:"bold",fontSize:"1.2rem"},children:"999,999 TON"}),e.jsx(i,{sx:{color:"black",fontSize:"0.8rem",background:l.primaryGradient,px:1,py:.2,borderRadius:"4px",fontWeight:"bold"},children:"PRIZE POOL"})]}),e.jsx(i,{sx:{color:"rgba(255,255,255,0.8)",fontSize:"0.9rem",fontWeight:"500"},children:"Play games & win massive rewards!"})]})]}),e.jsx(r,{className:"hover-effect",sx:{width:"100%",transition:"transform 0.3s ease"},children:e.jsx(f,{variant:"contained",fullWidth:!0,sx:{background:l.primaryGradient,color:"black",textTransform:"none",py:1.5,fontSize:"0.95rem",fontWeight:"bold",boxShadow:l.buttonShadow,"&:hover":{background:"linear-gradient(90deg, #8ee9ff, #6ed3ff)",boxShadow:l.buttonHoverShadow}},children:"Play Now →"})})]}),e.jsx(r,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:e.jsxs(Ve,{value:z,onChange:(o,t)=>Y(t),sx:{"& .MuiTab-root":{color:"rgba(255,255,255,0.7)",textTransform:"none","&.Mui-selected":{color:l.primaryColor}},"& .MuiTabs-indicator":{backgroundColor:l.primaryColor}},children:[e.jsx(J,{label:"Boxes",value:"boxes"}),e.jsx(J,{label:"Sell items",value:"drops"}),e.jsx(J,{label:"Craft",value:"craft"})]})}),j&&e.jsx(i,{sx:{color:"#ff4444",mb:2,textAlign:"center"},children:j}),z==="boxes"&&e.jsx(T,{container:!0,spacing:1,children:ge.sort((o,t)=>{if(o.id==="mystery-gift")return-1;if(t.id==="mystery-gift")return 1;const n=X(o),d=X(t);return n>0&&d===0?-1:n===0&&d>0?1:parseFloat(o.salePrice)-parseFloat(t.salePrice)}).map(o=>e.jsx(T,{item:!0,xs:6,children:e.jsx(H.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(de,{onClick:()=>Z(o.id),sx:{position:"relative",background:o.id==="mystery-gift"?"linear-gradient(145deg, rgba(108,93,211,0.2) 0%, rgba(108,93,211,0.3) 100%)":"linear-gradient(145deg, rgba(26,27,35,0.9) 0%, rgba(26,27,35,0.95) 100%)",borderRadius:"15px",overflow:"hidden",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s",border:o.id==="mystery-gift"?"1px solid rgba(108,93,211,0.4)":`1px solid ${l.borderColor}`,height:"100%",minHeight:"330px"},children:[e.jsxs(r,{sx:{position:"absolute",top:10,left:10,background:l.primaryGradient,color:"black",px:1.5,py:.5,borderRadius:"8px",fontSize:"0.8rem",fontWeight:"bold",zIndex:1,display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Ye,{size:16}),X(o)]}),o.id==="mystery-gift"&&e.jsx(r,{sx:{position:"absolute",top:10,right:10,background:"linear-gradient(90deg, #6C7BDC, #6C7BDC80)",color:"white",px:1,py:.5,borderRadius:"20px",fontSize:"0.8rem",fontWeight:"bold",zIndex:1},children:"FREE"}),e.jsx(r,{component:"img",src:o.image,alt:o.title,sx:{width:"100%",height:"200px",mt:-3,mb:-7,objectFit:"contain",p:1}}),e.jsxs(r,{sx:{p:2},children:[e.jsx(i,{variant:"h6",sx:{color:"white",fontWeight:"bold",fontSize:"1rem"},children:o.title}),e.jsx(i,{sx:{color:"rgba(255,255,255,0.7)",mb:2,fontSize:"0.9rem",height:"40px",overflow:"hidden"},children:o.description}),e.jsx(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:o.id==="mystery-gift"?e.jsx(r,{sx:{width:"100%",height:"24px"}}):e.jsxs(e.Fragment,{children:[e.jsxs(i,{sx:{color:"rgba(255,255,255,0.5)",textDecoration:"line-through",fontSize:"0.9rem"},children:["$",o.normalPrice]}),e.jsxs(i,{sx:{color:l.primaryColor,fontWeight:"bold",fontSize:"1.2rem"},children:["$",o.salePrice]})]})}),e.jsx(f,{onClick:()=>Z(o.id),variant:"contained",fullWidth:!0,sx:{mt:1,textTransform:"none",background:o.id==="mystery-gift"?"linear-gradient(90deg, #0088CC, #00A3FF)":l.primaryGradient,color:"black"},children:o.id==="mystery-gift"?"Open Free Box":"Open Box"})]})]})})},o.id))}),z==="drops"&&ke(),z==="craft"&&e.jsx(r,{sx:{maxWidth:"600px",margin:"0 auto"},children:e.jsx(Tr,{keyParts:(a==null?void 0:a.keyParts)||0,onCraftKey:Ce,isLoading:y,onOpenFreeBox:()=>Z("mystery-gift")})}),e.jsx(kr,{isOpening:w,onAnimationComplete:()=>{k(!1),I(!0)},onClose:()=>k(!1)}),g&&e.jsx(Ir,{reward:g,isVisible:S,onClose:Se}),e.jsx(Ke,{open:we,onClose:()=>ie(!1)}),e.jsx(ce,{open:be,onClose:()=>D(!1),sx:{display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100},children:e.jsx(r,{sx:{backgroundColor:"rgba(18, 22, 25, 0.95)",backdropFilter:"blur(20px)",borderRadius:"24px",padding:"32px",width:"90%",maxWidth:"360px",border:"1px solid rgba(110, 211, 255, 0.1)",outline:"none",display:"flex",flexDirection:"column",alignItems:"center",gap:"24px",position:"relative",zIndex:9999},children:e.jsxs(r,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:3,width:"100%"},children:[e.jsxs(r,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsxs(r,{sx:{width:"80px",height:"80px",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx(r,{component:"img",src:ue,alt:"Upgrade Ticket",sx:{width:"100%",height:"100%",objectFit:"contain",animation:"float 3s ease-in-out infinite","@keyframes float":{"0%, 100%":{transform:"translateY(0)"},"50%":{transform:"translateY(-10px)"}}}}),e.jsx(r,{sx:{position:"absolute",width:"100%",height:"10px",bottom:"-15px",background:"radial-gradient(ellipse at center, rgba(110, 211, 255, 0.3) 0%, rgba(110, 211, 255, 0) 70%)",animation:"shadow 3s ease-in-out infinite","@keyframes shadow":{"0%, 100%":{transform:"scale(1)",opacity:.3},"50%":{transform:"scale(0.7)",opacity:.1}}}})]}),e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(i,{sx:{color:"white",fontSize:"20px",fontWeight:"600",mb:1},children:"Level Upgrade Required"}),e.jsx(i,{sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"14px",lineHeight:1.5},children:"You need to upgrade your level to sell items !!!"})]})]}),e.jsxs(r,{sx:{width:"100%",display:"flex",gap:2,mb:1},children:[e.jsxs(r,{sx:{flex:1,background:"linear-gradient(145deg, rgba(110, 211, 255, 0.1) 0%, rgba(110, 211, 255, 0.05) 100%)",borderRadius:"16px",padding:"16px",border:"1px solid rgba(110, 211, 255, 0.1)",display:"flex",flexDirection:"column",alignItems:"center",gap:1,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(110, 211, 255, 0.1), transparent)",animation:"shine 2s infinite"},"@keyframes shine":{"100%":{left:"100%"}}},children:[e.jsx(i,{sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"12px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Current Level"}),e.jsx(i,{sx:{color:"#6ed3ff",fontSize:"24px",fontWeight:"600",textShadow:"0 0 10px rgba(110, 211, 255, 0.5)"},children:(a==null?void 0:a.level)||0})]}),e.jsxs(r,{sx:{flex:1,background:"linear-gradient(145deg, rgba(110, 211, 255, 0.1) 0%, rgba(110, 211, 255, 0.05) 100%)",borderRadius:"16px",padding:"16px",border:"1px solid rgba(110, 211, 255, 0.1)",display:"flex",flexDirection:"column",alignItems:"center",gap:1,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(110, 211, 255, 0.1), transparent)",animation:"shine 2s infinite 1s"}},children:[e.jsx(i,{sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"12px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Tickets"}),e.jsx(i,{sx:{color:"#6ed3ff",fontSize:"24px",fontWeight:"600",textShadow:"0 0 10px rgba(110, 211, 255, 0.5)"},children:(a==null?void 0:a.tickets)||0})]})]}),ae&&e.jsxs(i,{sx:{color:"#ff4d4d",fontSize:"14px",textAlign:"center",padding:"12px",backgroundColor:"rgba(255, 77, 77, 0.1)",borderRadius:"12px",width:"100%",border:"1px solid rgba(255, 77, 77, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx("span",{role:"img","aria-label":"warning",children:"⚠️"}),ae]}),e.jsxs(r,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:2},children:[e.jsx(f,{fullWidth:!0,onClick:Ie,disabled:K||!(a!=null&&a.tickets)||(a==null?void 0:a.tickets)<1,sx:{background:"linear-gradient(90deg, #6ed3ff, #8ee9ff)",color:"black",height:"48px",borderRadius:"12px",fontSize:"16px",fontWeight:"600",textTransform:"none",position:"relative",overflow:"hidden","&:hover":{background:"linear-gradient(90deg, #8ee9ff, #6ed3ff)"},"&:disabled":{background:"rgba(110, 211, 255, 0.1)",color:"rgba(255, 255, 255, 0.3)"},"&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)",animation:"shine 2s infinite"}},children:K?e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(V,{size:20,thickness:5,sx:{color:"black"}}),"Processing..."]}):"Use Upgrade Ticket"}),(()=>{const o=(a==null?void 0:a.level)||0,t=o+1,n=(a==null?void 0:a.tickets)||0,d=t-n;return o===0&&d===1?e.jsx(Br,{onAdComplete:()=>D(!0),disabled:K}):d>0?e.jsx(f,{fullWidth:!0,onClick:()=>ie(!0),sx:{background:"linear-gradient(90deg, #0088CC, #00A3FF)",color:"white",height:"48px",borderRadius:"12px",fontSize:"16px",fontWeight:"600",textTransform:"none",position:"relative",overflow:"hidden","&:hover":{background:"linear-gradient(90deg, #00A3FF, #0088CC)"},"&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)",animation:"shine 2s infinite"}},children:"Get More Tickets"}):null})(),e.jsx(i,{sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"14px",textAlign:"center",padding:"8px 12px",borderRadius:"8px"},children:(()=>{const t=((a==null?void 0:a.level)||0)+1,n=(a==null?void 0:a.tickets)||0,d=t-n;return d>0?`You need ${d} more ticket${d>1?"s":""} to reach Level ${t}`:null})()}),e.jsx(f,{fullWidth:!0,onClick:()=>D(!1),sx:{color:"rgba(255, 255, 255, 0.6)",height:"48px",fontSize:"16px",textTransform:"none","&:hover":{background:"rgba(255, 255, 255, 0.1)"}},children:"Cancel"})]})]})})}),e.jsx(ce,{open:je,onClose:()=>q(!1),sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(r,{sx:{backgroundColor:"rgba(18, 22, 25, 0.95)",backdropFilter:"blur(20px)",borderRadius:"24px",padding:"32px",width:"90%",maxWidth:"360px",border:"1px solid rgba(110, 211, 255, 0.2)",outline:"none",display:"flex",flexDirection:"column",alignItems:"center",gap:"24px",animation:"popIn 0.3s ease-out","@keyframes popIn":{"0%":{transform:"scale(0.9)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}},children:[e.jsx(r,{sx:{width:"80px",height:"80px",borderRadius:"50%",backgroundColor:"rgba(110, 211, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",animation:"pulse 1s ease-out"},children:e.jsx(qe,{size:40,color:"#6ed3ff"})}),e.jsx(i,{sx:{color:"#6ed3ff",fontSize:"24px",fontWeight:"500",textAlign:"center"},children:"Level Up!"}),e.jsx(i,{sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"16px",textAlign:"center"},children:`You've reached Level ${(a==null?void 0:a.level)||1}`})]})}),e.jsx(Qe,{open:ve,onClose:()=>Q(!1),onAccept:ze})]})})};export{Mr as default};
//# sourceMappingURL=BoxOpening-CzQ4S0Xx.js.map
