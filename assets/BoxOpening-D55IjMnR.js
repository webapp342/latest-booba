import{j as e,m as G,k as r,l as Ce,T as a,d as ke,n as Ie,B as b,o as _,D as Pe,r as ze,i as Le,p as Re,q as Te,t as We,v as Fe,w as oe,x as Ae,y as xe,H as De,f as O,u as Z,z as J,A as ae,E as Ee,C as ne,c as Ue,J as Be,K as $e,L as q,G as k,a as se,P as Oe,N as Ge,O as le,Q as _e,R as Me,U as Ve,V as He,W as Ye,X as Ke,Y as Ne,Z as qe,_ as Qe,$ as Xe,a0 as Ze,a1 as Je,a2 as er,a3 as rr,a4 as tr,a5 as ir,a6 as or,a7 as ar,a8 as nr,a9 as sr,aa as lr,ab as dr,ac as cr,ad as xr,ae as gr,af as mr}from"./index-B7cOPk_5.js";import{r as l,u as ur,e as pr,c as hr}from"./vendor-Btj0IEn_.js";import{B as br,R as fr,g as yr}from"./RewardDisplay-DgxcrzOh.js";import{d as Q}from"./firebase-CrRYbu56.js";const h={primaryColor:"#6ed3ff",primaryGradient:"linear-gradient(90deg, #6ed3ff, #8ee9ff)",bgGradient:"linear-gradient(135deg, rgba(110, 211, 255, 0.3) 0%, rgba(110, 211, 255, 0.1) 100%)",borderColor:"rgba(110, 211, 255, 0.2)",hoverBorderColor:"rgba(110, 211, 255, 0.4)",buttonShadow:"0 4px 12px rgba(110, 211, 255, 0.3)",buttonHoverShadow:"0 6px 16px rgba(110, 211, 255, 0.4)"},jr=({keyParts:u,onCraftKey:y,isLoading:o})=>{const x=u>=5,P=u/5*100;return e.jsx(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(r,{sx:{mt:4,p:3,background:h.bgGradient,borderRadius:"15px",border:`1px solid ${h.borderColor}`,position:"relative",overflow:"hidden",transition:"all 0.3s ease","&:hover":{border:`1px solid ${h.hoverBorderColor}`,boxShadow:h.buttonHoverShadow}},children:[e.jsx(r,{sx:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:`radial-gradient(circle, ${h.primaryColor}15 0%, ${h.primaryColor}00 70%)`,pointerEvents:"none",opacity:x?1:0,transition:"opacity 0.3s ease"}}),e.jsxs(r,{sx:{position:"relative",zIndex:1},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(r,{sx:{width:"48px",height:"48px",borderRadius:"12px",background:h.primaryGradient,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:h.buttonShadow},children:e.jsx(Ce,{sx:{color:"white",fontSize:"1.8rem"}})}),e.jsxs(r,{children:[e.jsx(a,{variant:"h6",sx:{color:"white",fontWeight:"bold",lineHeight:1.2},children:"Key Crafting"}),e.jsx(a,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.9rem"},children:"Collect 5 parts to craft a key"})]})]}),e.jsx(ke,{sx:{color:"rgba(255,255,255,0.7)","&:hover":{color:h.primaryColor}},children:e.jsx(Ie,{})})]}),e.jsxs(r,{sx:{mb:3},children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(a,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.9rem"},children:"Progress"}),e.jsxs(a,{sx:{color:x?h.primaryColor:"rgba(255,255,255,0.7)",fontWeight:"bold",fontSize:"0.9rem"},children:[u,"/5 parts"]})]}),e.jsx(r,{sx:{width:"100%",height:"8px",background:"rgba(255,255,255,0.1)",borderRadius:"4px",overflow:"hidden"},children:e.jsx(G.div,{initial:{width:0},animate:{width:`${P}%`},transition:{duration:.5},style:{height:"100%",background:x?h.primaryGradient:"linear-gradient(90deg, rgba(255,255,255,0.2), rgba(255,255,255,0.3))",borderRadius:"4px"}})})]}),e.jsxs(r,{sx:{mt:3,display:"flex",flexDirection:"column",gap:2},children:[e.jsx(b,{variant:"contained",onClick:y,disabled:!x||o,fullWidth:!0,sx:{py:1.5,background:x?h.primaryGradient:"rgba(255,255,255,0.1)",color:x?"black":"rgba(255,255,255,0.5)",fontWeight:"bold",fontSize:"0.95rem",borderRadius:"8px",textTransform:"none",position:"relative",boxShadow:x?h.buttonShadow:"none","&:hover":{background:x?"linear-gradient(90deg, #8ee9ff, #6ed3ff)":"rgba(255,255,255,0.1)",boxShadow:x?h.buttonHoverShadow:"none"},"&:disabled":{background:"rgba(255,255,255,0.1)",color:"rgba(255,255,255,0.3)"}},children:o?e.jsx(_,{size:24,sx:{color:x?"black":"rgba(255,255,255,0.5)"}}):e.jsx(e.Fragment,{children:x?"Craft Key":"Insufficient Parts"})}),!x&&e.jsx(Pe,{})]})]})]})})};var ee={},wr=Le;Object.defineProperty(ee,"__esModule",{value:!0});var ge=ee.default=void 0,vr=wr(ze()),Sr=e;ge=ee.default=(0,vr.default)((0,Sr.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");const Cr=Re(Fe),kr=Te`
  0% {
    transform: rotate(0deg);
  }
  50% {
    transform: rotate(180deg);
  }
  100% {
    transform: rotate(360deg);
  }
`,Ir=We(r)`
  animation: ${kr} 2s steps(2) infinite;
  display: flex;
  align-items: center;
  justify-content: center;
`,de="https://www.effectiveratecpm.com/rfzqpxh9b5?key=363850befc2ce02b0f1173157255afe8",f=2,L="levelUpgradeViewCount",$="lastLevelUpgradeClaim",X=60*1e3,Pr=({onAdComplete:u,disabled:y})=>{const[o,x]=l.useState(!1),[P,z]=l.useState(null),[p,j]=l.useState(0),[w,I]=l.useState(null);l.useEffect(()=>{const c=localStorage.getItem($);if(c){const g=parseInt(c),T=Date.now()-g;T<X?(I(X-T),localStorage.removeItem(L),j(0)):(localStorage.removeItem($),localStorage.removeItem(L),j(0),I(null))}else{const g=localStorage.getItem(L);g&&j(parseInt(g))}},[]),l.useEffect(()=>{if(w===null)return;const c=setInterval(()=>{I(g=>g===null||g<=1e3?(clearInterval(c),localStorage.removeItem($),localStorage.removeItem(L),j(0),null):g-1e3)},1e3);return()=>clearInterval(c)},[w]);const M=l.useCallback(()=>{var c;x(!0),z(null);try{(c=window.Telegram)!=null&&c.WebApp?window.Telegram.WebApp.openLink(de):window.open(de,"_blank");const g=p+1;j(g),localStorage.setItem(L,g.toString()),g>=f&&u&&u()}catch{z("Failed to load advertisement. Please try again.")}finally{x(!1)}},[u,p]),E=async()=>{try{x(!0);const c=localStorage.getItem("telegramUserId");if(!c)throw new Error("User ID not found");const g=O(Cr,"users",c);await Z(g,{tickets:J(1)}),localStorage.removeItem(L),j(0);const R=Date.now();localStorage.setItem($,R.toString()),I(X),u&&u()}catch{z("Failed to claim reward. Please try again.")}finally{x(!1)}},U=c=>`${Math.ceil(c/1e3)}s`;return e.jsxs(r,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:[e.jsx(b,{fullWidth:!0,variant:"contained",onClick:p>=f?E:M,disabled:y||o||w!==null,startIcon:p>=f?null:e.jsx("img",{src:oe,alt:"",width:32}),sx:{backgroundColor:p>=f?"rgba(76, 175, 80, 0.1)":"rgba(110, 211, 255, 0.1)",color:p>=f?"#4caf50":"#6ed3ff",border:p>=f?"1px solid rgba(76, 175, 80, 0.5)":"1px solid rgba(110, 211, 255, 0.2)","&:hover":{backgroundColor:p>=f?"rgba(76, 175, 80, 0.2)":"rgba(110, 211, 255, 0.2)",border:p>=f?"1px solid rgba(76, 175, 80, 0.7)":"1px solid rgba(110, 211, 255, 0.3)"},"&:disabled":{backgroundColor:"rgba(255, 255, 255, 0.05)",color:"rgba(255, 255, 255, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)",opacity:.7,cursor:"not-allowed"},borderRadius:2,display:"flex",alignItems:"center",gap:1,textTransform:"none",fontSize:"0.95rem",fontWeight:600,transition:"all 0.2s ease"},children:o?e.jsx(_,{size:24,sx:{color:"inherit"}}):w!==null?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:oe,alt:"",width:32}),"Earn Free Ticket"]}):y?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{size:18,strokeWidth:1.5}),"Use Upgrade Ticket"]}):p>=f?e.jsxs(e.Fragment,{children:[e.jsx(r,{component:"img",src:xe,sx:{width:20,height:20,mr:1}}),"Claim 1 Ticket"]}):e.jsxs(e.Fragment,{children:["Earn Free Ticket",p>0&&e.jsxs(r,{sx:{backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"8px",px:1,py:.5,fontSize:"0.85rem",ml:1,border:"1px solid rgba(255, 255, 255, 0.1)"},children:[p,"/",f]})]})}),w!==null&&e.jsxs(a,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.5)",display:"flex",alignItems:"center",gap:1,fontSize:"0.85rem",mt:-1},children:[e.jsx(Ir,{children:e.jsx(De,{size:14,color:"rgba(255, 255, 255, 0.5)"})}),`Level Upgrade in ${U(w)}`]}),P&&e.jsx(a,{color:"error",variant:"body2",textAlign:"center",children:P})]})},zr="/assets/01_ROLEX_DAYTONA-Box-mock_box_tgFf3C6-CYGAuzWj.png",ce=[{id:"mystery-gift",image:Me,title:"Mystery Gift Box",normalPrice:"FREE",salePrice:"FREE",description:"Get free boxes for every deposits",brand:"Special"},{id:"alienware",image:Ve,title:"ALIENWARE",normalPrice:"16.89",salePrice:"14.49",description:"Gaming gear from Alienware",brand:"Tech"},{id:"amazon",image:He,title:"Amazon",normalPrice:"10.49",salePrice:"8.89",description:"Amazon mystery box with various items",brand:"Retail"},{id:"landrover",image:Ye,title:"Land Rover",normalPrice:"199.99",salePrice:"169.99",description:"Luxury SUV themed box with exclusive Land Rover items",brand:"Automotive"},{id:"rolex-submariner",image:Ke,title:"Submariner",normalPrice:"89.99",salePrice:"85.45",description:"Luxury diving watch themed box",brand:"Luxury"},{id:"donald-trump",image:Ne,title:"Donald Trump",normalPrice:"6.99",salePrice:"5.45",description:"Political memorabilia box",brand:"Politics"},{id:"rolex-yachtmaster",image:qe,title:"Yachtmaster",normalPrice:"199.99",salePrice:"149.99",description:"Luxury yacht watch themed box",brand:"Luxury"},{id:"rolex",image:Qe,title:"Rolex Collection",normalPrice:"299.99",salePrice:"249.99",description:"Premium Rolex collection box",brand:"Luxury"},{id:"chanel",image:Xe,title:"Chanel",normalPrice:"199.99",salePrice:"169.99",description:"Luxury fashion box featuring Chanel items",brand:"Luxury"},{id:"louis-vuitton",image:Ze,title:"Louis Vuitton",normalPrice:"99.99",salePrice:"95.45",description:"Premium Louis Vuitton fashion items",brand:"Luxury"},{id:"bmw",image:Je,title:"BMW Box",normalPrice:"189.99",salePrice:"159.99",description:"BMW themed luxury automotive box",brand:"Automotive"},{id:"prime",image:er,title:"Prime Box",normalPrice:"39.99",salePrice:"34.99",description:"Premium selection mystery box",brand:"Various"},{id:"sneakers",image:rr,title:"Sneakers Box",normalPrice:"29.99",salePrice:"19.99",description:"Premium sneaker collection box",brand:"Fashion"},{id:"rolex-daytona",image:zr,title:"Rolex Daytona",normalPrice:"299.99",salePrice:"249.99",description:"Luxury racing watch themed box",brand:"Luxury"},{id:"corsair",image:tr,title:"Corsair Gaming",normalPrice:"49.99",salePrice:"45.99",description:"Premium gaming gear box",brand:"Tech"},{id:"versace",image:ir,title:"Versace",normalPrice:"149.99",salePrice:"119.99",description:"Luxury Italian fashion box",brand:"Luxury"},{id:"football-frenzy",image:or,title:"Football Frenzy",normalPrice:"9.99",salePrice:"7.45",description:"Football themed mystery box",brand:"Sports"},{id:"maserati",image:ar,title:"Maserati",normalPrice:"299.99",salePrice:"249.99",description:"Italian luxury automotive box",brand:"Automotive"},{id:"topg",image:nr,title:"Top G",normalPrice:"49.99",salePrice:"45.50",description:"Premium lifestyle box",brand:"Lifestyle"},{id:"porsche",image:sr,title:"Porsche",normalPrice:"149.99",salePrice:"125.45",description:"Sports car themed luxury box",brand:"Automotive"},{id:"ferrari",image:lr,title:"Ferrari",normalPrice:"199.99",salePrice:"149.99",description:"Italian supercar themed box",brand:"Automotive"},{id:"old-money",image:dr,title:"Old Money",normalPrice:"29.99",salePrice:"24.99",description:"Classic luxury lifestyle box",brand:"Lifestyle"},{id:"cartier",image:cr,title:"Cartier",normalPrice:"199.99",salePrice:"149.99",description:"Luxury jewelry themed box",brand:"Luxury"},{id:"diamond-vault",image:xr,title:"Diamond Vault",normalPrice:"199.99",salePrice:"159.99",description:"Premium diamond jewelry box",brand:"Luxury"},{id:"hublot",image:gr,title:"Hublot",normalPrice:"99.99",salePrice:"89.99",description:"Luxury Swiss watch themed box",brand:"Luxury"}],s={primaryColor:"#6ed3ff",primaryGradient:"linear-gradient(90deg, #6ed3ff, #8ee9ff)",bgGradient:"linear-gradient(135deg, rgba(110, 211, 255, 0.3) 0%, rgba(110, 211, 255, 0.1) 100%)",borderColor:"rgba(110, 211, 255, 0.2)",hoverBorderColor:"rgba(110, 211, 255, 0.4)",buttonShadow:"0 4px 12px rgba(110, 211, 255, 0.3)",buttonHoverShadow:"0 6px 16px rgba(110, 211, 255, 0.4)"},Fr=()=>{const u=ur(),y=pr(),[o,x]=l.useState(null),[P,z]=l.useState(!1),[p,j]=l.useState(null),[w,I]=l.useState(!1),[M,E]=l.useState(!1),[U,c]=l.useState(null),[g,R]=l.useState(!0),[T,me]=l.useState(""),[B,re]=l.useState("asc"),[v,V]=l.useState("boxes"),[W,ue]=l.useState("price"),[pe,F]=l.useState(!1),[,he]=l.useState(null),[H,A]=l.useState(!1),[te,D]=l.useState(""),[be,Y]=l.useState(!1),[fe,ie]=l.useState(!1),K=hr.useCallback(i=>{var n;if(!o)return 0;if(i.id==="mystery-gift")return o.giftBox||0;const t=ae[i.id];return t?((n=o.boxes)==null?void 0:n[t.title])||0:(console.log("Box not found:",i.id),0)},[o]);l.useEffect(()=>{var i;(i=y.state)!=null&&i.defaultTab&&(V(y.state.defaultTab),u(y.pathname,{replace:!0}))},[y.state]),l.useEffect(()=>{const i=localStorage.getItem("telegramUserId");if(!i){u("/spin");return}const t=Ee(O(Q,"users",i),n=>{if(n.exists()){const d=n.data();x(d),console.log("Firebase Boxes:",d.boxes),console.log("Game Cards:",ce.map(S=>S.title))}else c("Kullanıcı verisi bulunamadı");R(!1)},n=>{console.error("Error fetching user stats:",n),c("Veriler yüklenirken hata oluştu"),R(!1)});return()=>t()},[u]);const N=i=>{u(`/box/${i}`)},ye=()=>{I(!1),j(null)},je=async()=>{const i=localStorage.getItem("telegramUserId");if(!o||o.keyParts<5){c("Yetersiz anahtar parçası");return}c(null),E(!0);try{const t=O(Q,"users",i);await Z(t,{keyParts:J(-5),keys:J(1)}),yr.to(document.body,{duration:.2,scale:1.02,yoyo:!0,repeat:1,ease:"power2.inOut"})}catch(t){console.error("Error crafting key:",t),c("Anahtar oluşturulurken bir hata oluştu")}finally{E(!1)}},we=()=>{if(!(o!=null&&o.drops)||Object.keys(o.drops).length===0)return e.jsxs(r,{sx:{textAlign:"center",py:3,px:3,background:s.bgGradient,borderRadius:"15px",border:`1px solid ${s.borderColor}`,maxWidth:"600px",margin:"0 auto"},children:[e.jsx(a,{variant:"h5",sx:{color:"white",fontWeight:"bold",mt:-1},children:"No Items Found"}),e.jsx(a,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"1rem",mb:3,maxWidth:"400px",margin:"0 auto"},children:"Start your collection by opening mystery boxes and discover amazing rewards!"}),e.jsx(r,{sx:{display:"flex",justifyContent:"center",flexWrap:"wrap"},children:e.jsx(b,{onClick:()=>V("boxes"),variant:"contained",sx:{background:s.primaryGradient,color:"black",py:1.5,fontSize:"0.95rem",fontWeight:"bold",textTransform:"none",borderRadius:"8px",boxShadow:s.buttonShadow,mt:2},children:"Open Boxes"})})]});let i=Object.entries(o.drops).flatMap(([t,n])=>n.map(d=>{const S=Object.values(ae).find(C=>C.title===t),m=S==null?void 0:S.drops.find(C=>C.code===d.code);return{...d,boxTitle:t,name:(m==null?void 0:m.name)||"Unknown Item",image:(m==null?void 0:m.image)||"",price:(m==null?void 0:m.price)||"0",rarity:(m==null?void 0:m.rarity)||0}}));return i=i.filter(t=>{const n=T.toLowerCase();return t.name.toLowerCase().includes(n)||t.boxTitle.toLowerCase().includes(n)}),i.sort((t,n)=>{switch(W){case"price":return B==="asc"?parseFloat(t.price)-parseFloat(n.price):parseFloat(n.price)-parseFloat(t.price);case"rarity":return B==="asc"?t.rarity-n.rarity:n.rarity-t.rarity;default:return 0}}),e.jsxs(r,{children:[e.jsxs(r,{sx:{mb:3,p:3,borderRadius:"15px",background:"rgba(110, 211, 255, 0.05)",border:`1px solid ${s.borderColor}`},children:[e.jsx(a,{variant:"h6",sx:{color:"white",mb:2},children:"My Collection Summary"}),e.jsxs(k,{container:!0,spacing:2,children:[e.jsx(k,{item:!0,xs:4,children:e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(a,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.9rem"},children:"Total Items"}),e.jsx(a,{sx:{color:s.primaryColor,fontWeight:"bold",fontSize:"1.5rem"},children:i.length})]})}),e.jsx(k,{item:!0,xs:4,children:e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(a,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.9rem"},children:"Total Value"}),e.jsxs(a,{sx:{color:s.primaryColor,fontWeight:"bold",fontSize:"1.5rem"},children:["$",i.reduce((t,n)=>t+parseFloat(n.price)*n.amount,0).toFixed(2)]})]})}),e.jsx(k,{item:!0,xs:4,children:e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(a,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.9rem"},children:"Uniques"}),e.jsx(a,{sx:{color:s.primaryColor,fontWeight:"bold",fontSize:"1.5rem"},children:new Set(i.map(t=>t.boxTitle)).size})]})})]})]}),e.jsxs(r,{sx:{mb:3,display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(r,{sx:{display:"flex",gap:1,flex:2},children:["price","rarity"].map(t=>e.jsx(b,{onClick:()=>ue(t),variant:W===t?"contained":"outlined",size:"small",fullWidth:!0,sx:{color:W===t?"white":"rgba(255,255,255,0.7)",borderColor:s.borderColor,backgroundColor:W===t?s.primaryColor:"transparent","&:hover":{backgroundColor:W===t?"#8ee9ff":"rgba(110, 211, 255, 0.1)"},fontSize:"0.8rem",letterSpacing:.1,textTransform:"none",height:"36px"},children:t.charAt(0).toUpperCase()+t.slice(1)},t))}),e.jsx(b,{onClick:()=>re(t=>t==="asc"?"desc":"asc"),variant:"outlined",size:"small",fullWidth:!0,sx:{flex:1,color:"white",borderColor:s.borderColor,fontSize:"0.8rem",letterSpacing:.1,textTransform:"none",height:"36px"},children:B==="asc"?"↑ Ascending":"↓ Descending"})]}),e.jsx(k,{container:!0,spacing:2,children:i.map((t,n)=>e.jsx(k,{item:!0,xs:12,sm:6,md:4,children:e.jsx(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:n*.1},children:e.jsxs(se,{sx:{position:"relative",background:"linear-gradient(145deg, rgba(26,27,35,0.9) 0%, rgba(26,27,35,0.95) 100%)",borderRadius:"15px",overflow:"hidden",border:`1px solid ${s.borderColor}`,height:"100%",transition:"transform 0.2s",minHeight:"420px"},children:[e.jsxs(r,{sx:{position:"relative",pt:"75%",background:"linear-gradient(45deg, rgba(108,93,211,0.1) 0%, rgba(108,93,211,0.05) 100%)"},children:[e.jsx(r,{component:"img",src:t.image,alt:t.name,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",mb:1,objectFit:"contain",p:.5}}),e.jsx(r,{sx:{position:"absolute",top:10,right:10,background:"rgba(108,93,211,0.9)",borderRadius:"12px",px:1.5,py:.5},children:e.jsxs(a,{sx:{color:"white",fontSize:"0.8rem",fontWeight:"bold"},children:[(t.rarity*100).toFixed(2),"% Rare"]})})]}),e.jsxs(r,{sx:{p:2},children:[e.jsxs(r,{sx:{mb:2},children:[e.jsx(a,{variant:"h6",sx:{color:"white",fontWeight:"bold",fontSize:"1.1rem",mb:.5},children:t.name}),e.jsxs(a,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.85rem",display:"flex",alignItems:"center",gap:.5},children:["From: ",t.boxTitle]})]}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(108,93,211,0.1)",borderRadius:"12px",p:1.5,mb:2},children:[e.jsxs(r,{children:[e.jsx(a,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.8rem"},children:"Value"}),e.jsxs(a,{sx:{color:s.primaryColor,fontWeight:"bold",fontSize:"1.2rem"},children:["$",t.price]})]}),e.jsxs(r,{sx:{textAlign:"right"},children:[e.jsx(a,{sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.8rem"},children:"Amount"}),e.jsxs(a,{sx:{color:s.primaryColor,fontWeight:"bold",fontSize:"1.2rem"},children:[t.amount,"x"]})]})]}),e.jsxs(b,{variant:"contained",fullWidth:!0,onClick:d=>{d.stopPropagation(),Se(t)},sx:{background:"linear-gradient(90deg, #6ed3ff, #8ee9ff)",color:"black",py:1.5,fontSize:"0.95rem",fontWeight:"bold",textTransform:"none",borderRadius:"8px",boxShadow:"0 4px 12px rgba(110,211,255,0.3)","&:hover":{background:"linear-gradient(90deg, #8ee9ff, #6ed3ff)",boxShadow:"0 6px 16px rgba(110,211,255,0.4)"}},children:["Sell Item for $",(parseFloat(t.price)*t.amount).toFixed(2)]})]})]})})},`${t.code}-${n}`))})]})},ve=async()=>{A(!0),D("");const i=localStorage.getItem("telegramUserId");if(!i){D("User ID not found"),A(!1);return}try{const t=O(Q,"users",i),n=await mr(t);if(!n.exists()){D("User data not found"),A(!1);return}const d=n.data(),S=d.level||0,m=S+1,C=m;if(!d.tickets||d.tickets<C){D(`Not enough tickets. Need ${C} tickets for level ${m}`),A(!1);return}await Z(t,{level:m,tickets:d.tickets-C,lastLevelUpgrade:new Date().toISOString(),upgradeTransaction:{amount:C,timestamp:new Date().toISOString(),type:"TICKET_UPGRADE",fromLevel:S,toLevel:m}}),F(!1),Y(!0),setTimeout(()=>{Y(!1)},2e3)}catch(t){console.error("Error processing level upgrade:",t),D("Failed to process upgrade. Please try again.")}finally{A(!1)}},Se=async i=>{if(!localStorage.getItem("telegramUserId"))return;if(((o==null?void 0:o.level)||0)<200){he(i),F(!0);return}console.log("Selling item:",i)};return g?e.jsx(ne,{maxWidth:"lg",children:e.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e.jsx(_,{})})}):e.jsx(ne,{maxWidth:"lg",children:e.jsxs(r,{sx:{mt:-5,pb:25},children:[v!=="craft"&&e.jsx(r,{sx:{mb:4},children:e.jsxs(r,{sx:{display:"flex",gap:2,alignItems:"stretch"},children:[e.jsx(Ue,{fullWidth:!0,variant:"outlined",placeholder:v==="boxes"?"Search boxes...":"Search drops...",value:T,onChange:i=>me(i.target.value),InputProps:{startAdornment:e.jsx(Be,{position:"start",children:e.jsx(ge,{sx:{color:"white"}})}),sx:{color:"white",height:"100%","& .MuiOutlinedInput-root":{height:"100%"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.2)"}}},sx:{"& .MuiInputBase-root":{height:"48px"}}}),v==="boxes"&&e.jsxs(b,{onClick:()=>re(i=>i==="asc"?"desc":"asc"),sx:{color:"white",borderColor:"rgba(255,255,255,0.2)",fontSize:"0.8rem",letterSpacing:.1,textTransform:"none",minWidth:"120px",height:"48px"},variant:"outlined",children:["Price ",B==="asc"?"↑":"↓"]})]})}),v!=="craft"&&e.jsxs(r,{onClick:()=>u("/games"),sx:{mb:4,background:s.bgGradient,borderRadius:"15px",overflow:"hidden",cursor:"pointer",position:"relative",border:`1px solid ${s.borderColor}`,transition:"all 0.3s ease",p:2.5,"&:hover":{border:`1px solid ${s.hoverBorderColor}`,boxShadow:s.buttonHoverShadow,"& .hover-effect":{transform:"translateY(-2px)"}}},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2.5,mb:2},children:[e.jsx(r,{sx:{width:"52px",height:"52px",borderRadius:"12px",background:s.primaryGradient,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,boxShadow:s.buttonShadow},children:e.jsx(a,{sx:{color:"white",fontWeight:"bold",fontSize:"1.8rem"},children:"💎"})}),e.jsxs(r,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[e.jsx(a,{sx:{color:s.primaryColor,fontWeight:"bold",fontSize:"1.2rem"},children:"999,999 TON"}),e.jsx(a,{sx:{color:"black",fontSize:"0.8rem",background:s.primaryGradient,px:1,py:.2,borderRadius:"4px",fontWeight:"bold"},children:"PRIZE POOL"})]}),e.jsx(a,{sx:{color:"rgba(255,255,255,0.8)",fontSize:"0.9rem",fontWeight:"500"},children:"Play games & win massive rewards!"})]})]}),e.jsx(r,{className:"hover-effect",sx:{width:"100%",transition:"transform 0.3s ease"},children:e.jsx(b,{variant:"contained",fullWidth:!0,sx:{background:s.primaryGradient,color:"black",textTransform:"none",py:1.5,fontSize:"0.95rem",fontWeight:"bold",boxShadow:s.buttonShadow,"&:hover":{background:"linear-gradient(90deg, #8ee9ff, #6ed3ff)",boxShadow:s.buttonHoverShadow}},children:"Play Now →"})})]}),e.jsx(r,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:e.jsxs($e,{value:v,onChange:(i,t)=>V(t),sx:{"& .MuiTab-root":{color:"rgba(255,255,255,0.7)",textTransform:"none","&.Mui-selected":{color:s.primaryColor}},"& .MuiTabs-indicator":{backgroundColor:s.primaryColor}},children:[e.jsx(q,{label:"Boxes",value:"boxes"}),e.jsx(q,{label:"Sell items",value:"drops"}),e.jsx(q,{label:"Craft",value:"craft"})]})}),U&&e.jsx(a,{sx:{color:"#ff4444",mb:2,textAlign:"center"},children:U}),v==="boxes"&&e.jsx(k,{container:!0,spacing:1,children:ce.sort((i,t)=>{if(i.id==="mystery-gift")return-1;if(t.id==="mystery-gift")return 1;const n=K(i),d=K(t);return n>0&&d===0?-1:n===0&&d>0?1:parseFloat(i.salePrice)-parseFloat(t.salePrice)}).map(i=>e.jsx(k,{item:!0,xs:6,children:e.jsx(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(se,{onClick:()=>N(i.id),sx:{position:"relative",background:i.id==="mystery-gift"?"linear-gradient(145deg, rgba(108,93,211,0.2) 0%, rgba(108,93,211,0.3) 100%)":"linear-gradient(145deg, rgba(26,27,35,0.9) 0%, rgba(26,27,35,0.95) 100%)",borderRadius:"15px",overflow:"hidden",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s",border:i.id==="mystery-gift"?"1px solid rgba(108,93,211,0.4)":`1px solid ${s.borderColor}`,height:"100%",minHeight:"330px"},children:[e.jsxs(r,{sx:{position:"absolute",top:10,left:10,background:s.primaryGradient,color:"black",px:1.5,py:.5,borderRadius:"8px",fontSize:"0.8rem",fontWeight:"bold",zIndex:1,display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Oe,{size:16}),K(i)]}),i.id==="mystery-gift"&&e.jsx(r,{sx:{position:"absolute",top:10,right:10,background:"linear-gradient(90deg, #6C7BDC, #6C7BDC80)",color:"white",px:1,py:.5,borderRadius:"20px",fontSize:"0.8rem",fontWeight:"bold",zIndex:1},children:"FREE"}),e.jsx(r,{component:"img",src:i.image,alt:i.title,sx:{width:"100%",height:"200px",mt:-3,mb:-7,objectFit:"contain",p:1}}),e.jsxs(r,{sx:{p:2},children:[e.jsx(a,{variant:"h6",sx:{color:"white",fontWeight:"bold",fontSize:"1rem"},children:i.title}),e.jsx(a,{sx:{color:"rgba(255,255,255,0.7)",mb:2,fontSize:"0.9rem",height:"40px",overflow:"hidden"},children:i.description}),e.jsx(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:i.id==="mystery-gift"?e.jsx(r,{sx:{width:"100%",height:"24px"}}):e.jsxs(e.Fragment,{children:[e.jsxs(a,{sx:{color:"rgba(255,255,255,0.5)",textDecoration:"line-through",fontSize:"0.9rem"},children:["$",i.normalPrice]}),e.jsxs(a,{sx:{color:s.primaryColor,fontWeight:"bold",fontSize:"1.2rem"},children:["$",i.salePrice]})]})}),e.jsx(b,{onClick:()=>N(i.id),variant:"contained",fullWidth:!0,sx:{mt:1,textTransform:"none",background:i.id==="mystery-gift"?"linear-gradient(90deg, #0088CC, #00A3FF)":s.primaryGradient,color:"black"},children:i.id==="mystery-gift"?"Open Free Box":"Open Box"})]})]})})},i.id))}),v==="drops"&&we(),v==="craft"&&e.jsx(r,{sx:{maxWidth:"600px",margin:"0 auto"},children:e.jsx(jr,{keyParts:(o==null?void 0:o.keyParts)||0,onCraftKey:je,isLoading:M,onOpenFreeBox:()=>N("mystery-gift")})}),e.jsx(br,{isOpening:P,onAnimationComplete:()=>{z(!1),I(!0)},onClose:()=>z(!1)}),p&&e.jsx(fr,{reward:p,isVisible:w,onClose:ye}),e.jsx(Ge,{open:fe,onClose:()=>ie(!1)}),e.jsx(le,{open:pe,onClose:()=>F(!1),sx:{display:"flex",alignItems:"center",justifyContent:"center",zIndex:1100},children:e.jsx(r,{sx:{backgroundColor:"rgba(18, 22, 25, 0.95)",backdropFilter:"blur(20px)",borderRadius:"24px",padding:"32px",width:"90%",maxWidth:"360px",border:"1px solid rgba(110, 211, 255, 0.1)",outline:"none",display:"flex",flexDirection:"column",alignItems:"center",gap:"24px",position:"relative",zIndex:9999},children:e.jsxs(r,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:3,width:"100%"},children:[e.jsxs(r,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[e.jsxs(r,{sx:{width:"80px",height:"80px",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx(r,{component:"img",src:xe,alt:"Upgrade Ticket",sx:{width:"100%",height:"100%",objectFit:"contain",animation:"float 3s ease-in-out infinite","@keyframes float":{"0%, 100%":{transform:"translateY(0)"},"50%":{transform:"translateY(-10px)"}}}}),e.jsx(r,{sx:{position:"absolute",width:"100%",height:"10px",bottom:"-15px",background:"radial-gradient(ellipse at center, rgba(110, 211, 255, 0.3) 0%, rgba(110, 211, 255, 0) 70%)",animation:"shadow 3s ease-in-out infinite","@keyframes shadow":{"0%, 100%":{transform:"scale(1)",opacity:.3},"50%":{transform:"scale(0.7)",opacity:.1}}}})]}),e.jsxs(r,{sx:{textAlign:"center"},children:[e.jsx(a,{sx:{color:"white",fontSize:"20px",fontWeight:"600",mb:1},children:"Level Upgrade Required"}),e.jsx(a,{sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"14px",lineHeight:1.5},children:"You need to upgrade your level to sell items !!!"})]})]}),e.jsxs(r,{sx:{width:"100%",display:"flex",gap:2,mb:1},children:[e.jsxs(r,{sx:{flex:1,background:"linear-gradient(145deg, rgba(110, 211, 255, 0.1) 0%, rgba(110, 211, 255, 0.05) 100%)",borderRadius:"16px",padding:"16px",border:"1px solid rgba(110, 211, 255, 0.1)",display:"flex",flexDirection:"column",alignItems:"center",gap:1,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(110, 211, 255, 0.1), transparent)",animation:"shine 2s infinite"},"@keyframes shine":{"100%":{left:"100%"}}},children:[e.jsx(a,{sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"12px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Current Level"}),e.jsx(a,{sx:{color:"#6ed3ff",fontSize:"24px",fontWeight:"600",textShadow:"0 0 10px rgba(110, 211, 255, 0.5)"},children:(o==null?void 0:o.level)||0})]}),e.jsxs(r,{sx:{flex:1,background:"linear-gradient(145deg, rgba(110, 211, 255, 0.1) 0%, rgba(110, 211, 255, 0.05) 100%)",borderRadius:"16px",padding:"16px",border:"1px solid rgba(110, 211, 255, 0.1)",display:"flex",flexDirection:"column",alignItems:"center",gap:1,position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(110, 211, 255, 0.1), transparent)",animation:"shine 2s infinite 1s"}},children:[e.jsx(a,{sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"12px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Tickets"}),e.jsx(a,{sx:{color:"#6ed3ff",fontSize:"24px",fontWeight:"600",textShadow:"0 0 10px rgba(110, 211, 255, 0.5)"},children:(o==null?void 0:o.tickets)||0})]})]}),te&&e.jsxs(a,{sx:{color:"#ff4d4d",fontSize:"14px",textAlign:"center",padding:"12px",backgroundColor:"rgba(255, 77, 77, 0.1)",borderRadius:"12px",width:"100%",border:"1px solid rgba(255, 77, 77, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[e.jsx("span",{role:"img","aria-label":"warning",children:"⚠️"}),te]}),e.jsxs(r,{sx:{width:"100%",display:"flex",flexDirection:"column",gap:2},children:[e.jsx(b,{fullWidth:!0,onClick:ve,disabled:H||!(o!=null&&o.tickets)||(o==null?void 0:o.tickets)<1,sx:{background:"linear-gradient(90deg, #6ed3ff, #8ee9ff)",color:"black",height:"48px",borderRadius:"12px",fontSize:"16px",fontWeight:"600",textTransform:"none",position:"relative",overflow:"hidden","&:hover":{background:"linear-gradient(90deg, #8ee9ff, #6ed3ff)"},"&:disabled":{background:"rgba(110, 211, 255, 0.1)",color:"rgba(255, 255, 255, 0.3)"},"&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)",animation:"shine 2s infinite"}},children:H?e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(_,{size:20,thickness:5,sx:{color:"black"}}),"Processing..."]}):"Use Upgrade Ticket"}),(()=>{const i=(o==null?void 0:o.level)||0,t=i+1,n=(o==null?void 0:o.tickets)||0,d=t-n;return i===0&&d===1?e.jsx(Pr,{onAdComplete:()=>F(!0),disabled:H}):d>0?e.jsx(b,{fullWidth:!0,onClick:()=>ie(!0),sx:{background:"linear-gradient(90deg, #0088CC, #00A3FF)",color:"white",height:"48px",borderRadius:"12px",fontSize:"16px",fontWeight:"600",textTransform:"none",position:"relative",overflow:"hidden","&:hover":{background:"linear-gradient(90deg, #00A3FF, #0088CC)"},"&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)",animation:"shine 2s infinite"}},children:"Get More Tickets"}):null})(),e.jsx(a,{sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"14px",textAlign:"center",padding:"8px 12px",borderRadius:"8px"},children:(()=>{const t=((o==null?void 0:o.level)||0)+1,n=(o==null?void 0:o.tickets)||0,d=t-n;return d>0?`You need ${d} more ticket${d>1?"s":""} to reach Level ${t}`:null})()}),e.jsx(b,{fullWidth:!0,onClick:()=>F(!1),sx:{color:"rgba(255, 255, 255, 0.6)",height:"48px",fontSize:"16px",textTransform:"none","&:hover":{background:"rgba(255, 255, 255, 0.1)"}},children:"Cancel"})]})]})})}),e.jsx(le,{open:be,onClose:()=>Y(!1),sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(r,{sx:{backgroundColor:"rgba(18, 22, 25, 0.95)",backdropFilter:"blur(20px)",borderRadius:"24px",padding:"32px",width:"90%",maxWidth:"360px",border:"1px solid rgba(110, 211, 255, 0.2)",outline:"none",display:"flex",flexDirection:"column",alignItems:"center",gap:"24px",animation:"popIn 0.3s ease-out","@keyframes popIn":{"0%":{transform:"scale(0.9)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}},children:[e.jsx(r,{sx:{width:"80px",height:"80px",borderRadius:"50%",backgroundColor:"rgba(110, 211, 255, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",animation:"pulse 1s ease-out"},children:e.jsx(_e,{sx:{fontSize:40,color:"#6ed3ff",animation:"rotate 1s ease-out"}})}),e.jsx(a,{sx:{color:"#6ed3ff",fontSize:"24px",fontWeight:"500",textAlign:"center"},children:"Level Up!"}),e.jsx(a,{sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"16px",textAlign:"center"},children:`You've reached Level ${(o==null?void 0:o.level)||1}`})]})})]})})};export{Fr as default};
//# sourceMappingURL=BoxOpening-D55IjMnR.js.map
